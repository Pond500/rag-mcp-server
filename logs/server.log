2025-11-21 13:50:15 | INFO     | logger.py:76 | ‚úÖ Logger initialized: mcp_server
2025-11-21 13:50:15 | DEBUG    | logger.py:77 | Log file: /Users/pond500/RAG/mcp_rag-main/logs/server.log
2025-11-21 13:50:15 | INFO     | <stdin>:3 | Testing logger...
2025-11-21 13:50:15 | DEBUG    | <stdin>:4 | This is a debug message
2025-11-21 13:50:15 | WARNING  | <stdin>:5 | This is a warning
2025-11-21 13:50:15 | ERROR    | <stdin>:6 | This is an error
2025-11-21 13:50:41 | INFO     | logger.py:76 | ‚úÖ Logger initialized: mcp_server
2025-11-21 13:50:41 | DEBUG    | logger.py:77 | Log file: /Users/pond500/RAG/mcp_rag-main/logs/server.log
2025-11-21 13:50:41 | INFO     | multi_kb_rag.py:45 | üöÄ Initializing Multi-Knowledge Base RAG System...
2025-11-21 13:50:41 | DEBUG    | multi_kb_rag.py:52 | Qdrant client: localhost:6333
2025-11-21 13:50:50 | INFO     | multi_kb_rag.py:82 | ‚úÖ Multi-KB RAG System initialized
2025-11-21 13:51:07 | INFO     | logger.py:76 | ‚úÖ Logger initialized: mcp_server
2025-11-21 13:51:07 | DEBUG    | logger.py:77 | Log file: /Users/pond500/RAG/mcp_rag-main/logs/server.log
2025-11-21 13:51:08 | INFO     | mcp_server_multi_kb.py:38 | üöÄ Starting Multi-KB MCP Server...
2025-11-21 13:51:08 | INFO     | multi_kb_rag.py:45 | üöÄ Initializing Multi-Knowledge Base RAG System...
2025-11-21 13:51:08 | DEBUG    | multi_kb_rag.py:52 | Qdrant client: localhost:6333
2025-11-21 13:51:15 | INFO     | multi_kb_rag.py:82 | ‚úÖ Multi-KB RAG System initialized
2025-11-21 13:51:15 | INFO     | mcp_server_multi_kb.py:43 | ‚úÖ Multi-KB MCP Server ready
2025-11-21 13:51:15 | INFO     | mcp_server_multi_kb.py:47 | üõë Shutting down Multi-KB MCP Server...
2025-11-21 13:51:33 | INFO     | logger.py:76 | ‚úÖ Logger initialized: mcp_server
2025-11-21 13:51:33 | DEBUG    | logger.py:77 | Log file: /Users/pond500/RAG/mcp_rag-main/logs/server.log
2025-11-21 13:51:34 | INFO     | mcp_server_multi_kb.py:38 | üöÄ Starting Multi-KB MCP Server...
2025-11-21 13:51:34 | INFO     | multi_kb_rag.py:45 | üöÄ Initializing Multi-Knowledge Base RAG System...
2025-11-21 13:51:34 | DEBUG    | multi_kb_rag.py:52 | Qdrant client: localhost:6333
2025-11-21 13:51:39 | INFO     | multi_kb_rag.py:82 | ‚úÖ Multi-KB RAG System initialized
2025-11-21 13:51:39 | INFO     | mcp_server_multi_kb.py:43 | ‚úÖ Multi-KB MCP Server ready
2025-11-21 13:51:39 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-21 13:51:39 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'localhost:8000', 'user-agent': 'curl/8.7.1', 'accept': '*/*', 'content-type': 'application/json', 'content-length': '151'}
2025-11-21 13:51:39 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 1
2025-11-21 13:51:39 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-21 13:51:39 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-21 13:51:39 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (0.88ms)
2025-11-21 13:51:42 | INFO     | mcp_server_multi_kb.py:47 | üõë Shutting down Multi-KB MCP Server...
2025-11-21 13:54:16 | INFO     | logger.py:76 | ‚úÖ Logger initialized: mcp_server
2025-11-21 13:54:16 | DEBUG    | logger.py:77 | Log file: /Users/pond500/RAG/mcp_rag-main/logs/server.log
2025-11-21 13:54:16 | INFO     | mcp_server_multi_kb.py:38 | üöÄ Starting Multi-KB MCP Server...
2025-11-21 13:54:16 | INFO     | multi_kb_rag.py:45 | üöÄ Initializing Multi-Knowledge Base RAG System...
2025-11-21 13:54:17 | DEBUG    | multi_kb_rag.py:52 | Qdrant client: localhost:6333
2025-11-21 13:54:23 | INFO     | multi_kb_rag.py:82 | ‚úÖ Multi-KB RAG System initialized
2025-11-21 13:54:23 | INFO     | mcp_server_multi_kb.py:43 | ‚úÖ Multi-KB MCP Server ready
2025-11-21 13:54:47 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-21 13:54:47 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'af7ca5cd5752.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '169', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=3b944064e6f34b6081096b9c3f6a6a4e,sentry-sample_rate=0.0,sentry-sampled=false,sentry-sample_rand=0.403171', 'content-type': 'application/json', 'sentry-trace': '3b944064e6f34b6081096b9c3f6a6a4e-a1afc4da9ca01017-0', 'traceparent': '00-91c4eb4b2a181259a651ea60464415d2-62dd648bc0a6702b-00', 'x-b3-sampled': '0', 'x-b3-spanid': '62dd648bc0a6702b', 'x-b3-traceid': '91c4eb4b2a181259a651ea60464415d2', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': 'af7ca5cd5752.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-21 13:54:47 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-21 13:54:47 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-21 13:54:47 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-21 13:54:47 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.17ms)
2025-11-21 13:54:47 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-21 13:54:47 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'af7ca5cd5752.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=3b944064e6f34b6081096b9c3f6a6a4e,sentry-sample_rate=0.0,sentry-sampled=false,sentry-sample_rand=0.403171', 'content-type': 'application/json', 'sentry-trace': '3b944064e6f34b6081096b9c3f6a6a4e-86e9b11e5223619d-0', 'traceparent': '00-616e384664edb94d2e0e16eb709e1566-9a4e98d86ce81a84-00', 'x-b3-sampled': '0', 'x-b3-spanid': '9a4e98d86ce81a84', 'x-b3-traceid': '616e384664edb94d2e0e16eb709e1566', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': 'af7ca5cd5752.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-21 13:54:47 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-21 13:54:47 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-21 13:54:47 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.41ms)
2025-11-21 13:54:48 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-21 13:54:48 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'af7ca5cd5752.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '51', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=3b944064e6f34b6081096b9c3f6a6a4e,sentry-sample_rate=0.0,sentry-sampled=false,sentry-sample_rand=0.403171', 'content-type': 'application/json', 'sentry-trace': '3b944064e6f34b6081096b9c3f6a6a4e-a38acd245c5e296f-0', 'traceparent': '00-0856c35ef6ac3cfdc725626a33629ad4-19a042ab04d8f69b-00', 'x-b3-sampled': '0', 'x-b3-spanid': '19a042ab04d8f69b', 'x-b3-traceid': '0856c35ef6ac3cfdc725626a33629ad4', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': 'af7ca5cd5752.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-21 13:54:48 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: tools/list, ID: 1
2025-11-21 13:54:48 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.24ms)
2025-11-21 13:54:50 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-21 13:54:50 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'af7ca5cd5752.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '169', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=3b944064e6f34b6081096b9c3f6a6a4e,sentry-sample_rate=0.0,sentry-sampled=false,sentry-sample_rand=0.403171', 'content-type': 'application/json', 'sentry-trace': '3b944064e6f34b6081096b9c3f6a6a4e-83cb6788f03e027d-0', 'traceparent': '00-7d840cef598e249f8c33a897b68f9a21-08e73fab40b9ca4b-00', 'x-b3-sampled': '0', 'x-b3-spanid': '08e73fab40b9ca4b', 'x-b3-traceid': '7d840cef598e249f8c33a897b68f9a21', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': 'af7ca5cd5752.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-21 13:54:50 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-21 13:54:50 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-21 13:54:50 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-21 13:54:50 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.46ms)
2025-11-21 13:54:50 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-21 13:54:50 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'af7ca5cd5752.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=3b944064e6f34b6081096b9c3f6a6a4e,sentry-sample_rate=0.0,sentry-sampled=false,sentry-sample_rand=0.403171', 'content-type': 'application/json', 'sentry-trace': '3b944064e6f34b6081096b9c3f6a6a4e-b71f4bd67f8a41dc-0', 'traceparent': '00-73c0339194f39fd95e9dec6502060157-bf6048c7abc4caae-00', 'x-b3-sampled': '0', 'x-b3-spanid': 'bf6048c7abc4caae', 'x-b3-traceid': '73c0339194f39fd95e9dec6502060157', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': 'af7ca5cd5752.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-21 13:54:50 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-21 13:54:50 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-21 13:54:50 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (1.99ms)
2025-11-21 13:54:51 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-21 13:54:51 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'af7ca5cd5752.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '169', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=3b944064e6f34b6081096b9c3f6a6a4e,sentry-sample_rate=0.0,sentry-sampled=false,sentry-sample_rand=0.403171', 'content-type': 'application/json', 'sentry-trace': '3b944064e6f34b6081096b9c3f6a6a4e-865ac45f45a3eb9b-0', 'traceparent': '00-c12e0e11506156be962e357d5d83ea11-b8af76ed9ee12776-00', 'x-b3-sampled': '0', 'x-b3-spanid': 'b8af76ed9ee12776', 'x-b3-traceid': 'c12e0e11506156be962e357d5d83ea11', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': 'af7ca5cd5752.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-21 13:54:51 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-21 13:54:51 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-21 13:54:51 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-21 13:54:51 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.72ms)
2025-11-21 13:54:51 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-21 13:54:51 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'af7ca5cd5752.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=3b944064e6f34b6081096b9c3f6a6a4e,sentry-sample_rate=0.0,sentry-sampled=false,sentry-sample_rand=0.403171', 'content-type': 'application/json', 'sentry-trace': '3b944064e6f34b6081096b9c3f6a6a4e-b22e4837ef74ae28-0', 'traceparent': '00-685d5ab88040470e40f0b7c7edfbce94-0c26c059b1822985-00', 'x-b3-sampled': '0', 'x-b3-spanid': '0c26c059b1822985', 'x-b3-traceid': '685d5ab88040470e40f0b7c7edfbce94', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': 'af7ca5cd5752.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-21 13:54:51 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-21 13:54:51 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-21 13:54:51 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.95ms)
2025-11-21 13:54:51 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-21 13:54:51 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'af7ca5cd5752.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '51', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=3b944064e6f34b6081096b9c3f6a6a4e,sentry-sample_rate=0.0,sentry-sampled=false,sentry-sample_rand=0.403171', 'content-type': 'application/json', 'sentry-trace': '3b944064e6f34b6081096b9c3f6a6a4e-b2a4d241fb147f2b-0', 'traceparent': '00-03abec1887ddeb58524e7e43681d08b5-3c2acd7562f7822f-00', 'x-b3-sampled': '0', 'x-b3-spanid': '3c2acd7562f7822f', 'x-b3-traceid': '03abec1887ddeb58524e7e43681d08b5', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': 'af7ca5cd5752.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-21 13:54:51 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: tools/list, ID: 1
2025-11-21 13:54:51 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.30ms)
2025-11-21 13:55:53 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-21 13:55:53 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'af7ca5cd5752.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '169', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=52e0c50f50e8467c8b3fd050e875e242,sentry-sample_rate=0.0,sentry-sampled=false,sentry-sample_rand=0.265845', 'content-type': 'application/json', 'sentry-trace': 'fdf0f3cb25fd437c8d92a3e6ea53bb04-a5794b55dd1eca5e-0', 'traceparent': '00-fc7bb3596d359866ea8b75d2561eb6c1-e6b5daae0efb33b4-00', 'x-b3-sampled': '0', 'x-b3-spanid': 'e6b5daae0efb33b4', 'x-b3-traceid': 'fc7bb3596d359866ea8b75d2561eb6c1', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': 'af7ca5cd5752.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-21 13:55:53 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-21 13:55:53 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-21 13:55:53 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-21 13:55:53 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.31ms)
2025-11-21 13:55:53 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-21 13:55:53 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'af7ca5cd5752.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=52e0c50f50e8467c8b3fd050e875e242,sentry-sample_rate=0.0,sentry-sampled=false,sentry-sample_rand=0.265845', 'content-type': 'application/json', 'sentry-trace': 'fdf0f3cb25fd437c8d92a3e6ea53bb04-a62fd1b55d6bbcd6-0', 'traceparent': '00-77437607398265e0c147230dc35b9411-3f68e08c17fd5626-00', 'x-b3-sampled': '0', 'x-b3-spanid': '3f68e08c17fd5626', 'x-b3-traceid': '77437607398265e0c147230dc35b9411', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': 'af7ca5cd5752.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-21 13:55:53 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-21 13:55:53 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-21 13:55:53 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.84ms)
2025-11-21 13:55:53 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-21 13:55:53 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'af7ca5cd5752.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '349', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=52e0c50f50e8467c8b3fd050e875e242,sentry-sample_rate=0.0,sentry-sampled=false,sentry-sample_rand=0.265845', 'content-type': 'application/json', 'sentry-trace': 'fdf0f3cb25fd437c8d92a3e6ea53bb04-9371afd727b009d2-0', 'traceparent': '00-2c2c6c82c6232705e682bda07852d782-00b579e615d6c4e4-00', 'x-b3-sampled': '0', 'x-b3-spanid': '00b579e615d6c4e4', 'x-b3-traceid': '2c2c6c82c6232705e682bda07852d782', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': 'af7ca5cd5752.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-21 13:55:53 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: tools/call, ID: 1
2025-11-21 13:55:53 | INFO     | mcp_server_multi_kb.py:364 | üîß Tool call: chat_global
2025-11-21 13:55:53 | DEBUG    | mcp_server_multi_kb.py:365 | Arguments: {'query': '‡∏Ç‡∏≠‡∏õ‡∏∑‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏Å‡∏µ‡∏¨‡∏≤‡πÉ‡∏ä‡πâ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏≠‡∏∞‡πÑ‡∏£‡∏ö‡πâ‡∏≤‡∏á', 'session_id': 'session_12345'}
2025-11-21 13:55:53 | INFO     | multi_kb_rag.py:772 | üåê Auto-routing query: '‡∏Ç‡∏≠‡∏õ‡∏∑‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏Å‡∏µ‡∏¨‡∏≤‡πÉ‡∏ä‡πâ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏≠‡∏∞‡πÑ‡∏£‡∏ö‡πâ‡∏≤‡∏á...'
2025-11-21 13:55:53 | WARNING  | multi_kb_rag.py:715 | Router index is empty (no KBs registered)
2025-11-21 13:55:53 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (46.34ms)
2025-11-21 13:55:56 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-21 13:55:56 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'af7ca5cd5752.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '169', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=52e0c50f50e8467c8b3fd050e875e242,sentry-sample_rate=0.0,sentry-sampled=false,sentry-sample_rand=0.265845', 'content-type': 'application/json', 'sentry-trace': 'fdf0f3cb25fd437c8d92a3e6ea53bb04-91f686838e8c1115-0', 'traceparent': '00-47d873e8cd49f9fb7a77ba88258a76fc-56e6736f68ef411c-00', 'x-b3-sampled': '0', 'x-b3-spanid': '56e6736f68ef411c', 'x-b3-traceid': '47d873e8cd49f9fb7a77ba88258a76fc', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': 'af7ca5cd5752.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-21 13:55:56 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-21 13:55:56 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-21 13:55:56 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-21 13:55:56 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (1.99ms)
2025-11-21 13:55:57 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-21 13:55:57 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'af7ca5cd5752.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=52e0c50f50e8467c8b3fd050e875e242,sentry-sample_rate=0.0,sentry-sampled=false,sentry-sample_rand=0.265845', 'content-type': 'application/json', 'sentry-trace': 'fdf0f3cb25fd437c8d92a3e6ea53bb04-810d937719ddda42-0', 'traceparent': '00-64fdb00593f3cb8c1b068d5d62c8ce77-e2b18a8cb44e2eee-00', 'x-b3-sampled': '0', 'x-b3-spanid': 'e2b18a8cb44e2eee', 'x-b3-traceid': '64fdb00593f3cb8c1b068d5d62c8ce77', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': 'af7ca5cd5752.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-21 13:55:57 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-21 13:55:57 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-21 13:55:57 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.65ms)
2025-11-21 13:55:57 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-21 13:55:57 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'af7ca5cd5752.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '378', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=52e0c50f50e8467c8b3fd050e875e242,sentry-sample_rate=0.0,sentry-sampled=false,sentry-sample_rand=0.265845', 'content-type': 'application/json', 'sentry-trace': 'fdf0f3cb25fd437c8d92a3e6ea53bb04-bc39c2d5f29ffcbb-0', 'traceparent': '00-1c999c95cd808fafe8a7187bed9b236e-547a714c4299b059-00', 'x-b3-sampled': '0', 'x-b3-spanid': '547a714c4299b059', 'x-b3-traceid': '1c999c95cd808fafe8a7187bed9b236e', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': 'af7ca5cd5752.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-21 13:55:57 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: tools/call, ID: 1
2025-11-21 13:55:57 | INFO     | mcp_server_multi_kb.py:364 | üîß Tool call: chat_with_kb
2025-11-21 13:55:57 | DEBUG    | mcp_server_multi_kb.py:365 | Arguments: {'kb_name': 'kb_gun_law_v2', 'query': '‡∏Ç‡∏≠‡∏õ‡∏∑‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏Å‡∏µ‡∏¨‡∏≤‡πÉ‡∏ä‡πâ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏≠‡∏∞‡πÑ‡∏£‡∏ö‡πâ‡∏≤‡∏á', 'session_id': 'session_12345'}
2025-11-21 13:56:04 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (6672.83ms)
2025-11-21 13:57:47 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-21 13:57:47 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'af7ca5cd5752.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '169', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'traceparent': '00-4ad7b54aed37708b5956557d346b0995-d1bdc26f72792e2b-00', 'x-b3-sampled': '0', 'x-b3-spanid': 'd1bdc26f72792e2b', 'x-b3-traceid': '4ad7b54aed37708b5956557d346b0995', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': 'af7ca5cd5752.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-21 13:57:47 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-21 13:57:47 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-21 13:57:47 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-21 13:57:47 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (3.94ms)
2025-11-21 13:57:48 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-21 13:57:48 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'af7ca5cd5752.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'traceparent': '00-280f9a6f7369dd1bf968090263f8ab74-9460fa272fe0baef-00', 'x-b3-sampled': '0', 'x-b3-spanid': '9460fa272fe0baef', 'x-b3-traceid': '280f9a6f7369dd1bf968090263f8ab74', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': 'af7ca5cd5752.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-21 13:57:48 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-21 13:57:48 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-21 13:57:48 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (3.24ms)
2025-11-21 13:57:48 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-21 13:57:48 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'af7ca5cd5752.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '368', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'traceparent': '00-6886aa118ffecb6df17501e466946ddf-676f44d2cf9d8428-00', 'x-b3-sampled': '0', 'x-b3-spanid': '676f44d2cf9d8428', 'x-b3-traceid': '6886aa118ffecb6df17501e466946ddf', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': 'af7ca5cd5752.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-21 13:57:48 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: tools/call, ID: 1
2025-11-21 13:57:48 | INFO     | mcp_server_multi_kb.py:364 | üîß Tool call: chat_global
2025-11-21 13:57:48 | DEBUG    | mcp_server_multi_kb.py:365 | Arguments: {'query': '‡∏Ç‡∏≠‡∏õ‡∏∑‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏Å‡∏µ‡∏¨‡∏≤‡πÉ‡∏ä‡πâ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏≠‡∏∞‡πÑ‡∏£‡∏ö‡πâ‡∏≤‡∏á', 'session_id': 'session_20231120_001', 'top_k': 5}
2025-11-21 13:57:48 | INFO     | multi_kb_rag.py:772 | üåê Auto-routing query: '‡∏Ç‡∏≠‡∏õ‡∏∑‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏Å‡∏µ‡∏¨‡∏≤‡πÉ‡∏ä‡πâ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏≠‡∏∞‡πÑ‡∏£‡∏ö‡πâ‡∏≤‡∏á...'
2025-11-21 13:57:48 | WARNING  | multi_kb_rag.py:715 | Router index is empty (no KBs registered)
2025-11-21 13:57:48 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (36.17ms)
2025-11-21 13:57:51 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-21 13:57:51 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'af7ca5cd5752.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '169', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'traceparent': '00-a80ee4dd69cb73eb68b7620429741adf-42ebeda57e8deb29-00', 'x-b3-sampled': '0', 'x-b3-spanid': '42ebeda57e8deb29', 'x-b3-traceid': 'a80ee4dd69cb73eb68b7620429741adf', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': 'af7ca5cd5752.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-21 13:57:51 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-21 13:57:51 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-21 13:57:51 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-21 13:57:51 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.07ms)
2025-11-21 13:57:52 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-21 13:57:52 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'af7ca5cd5752.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'traceparent': '00-a46a95e2a90af32278fb085a7778522d-e6e59eaf89f7a7d2-00', 'x-b3-sampled': '0', 'x-b3-spanid': 'e6e59eaf89f7a7d2', 'x-b3-traceid': 'a46a95e2a90af32278fb085a7778522d', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': 'af7ca5cd5752.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-21 13:57:52 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-21 13:57:52 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-21 13:57:52 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.64ms)
2025-11-21 13:57:52 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-21 13:57:52 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'af7ca5cd5752.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '397', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'traceparent': '00-5ea0f5787867ae3fd3a3da9ae5d45d9e-6b4662d805735c21-00', 'x-b3-sampled': '0', 'x-b3-spanid': '6b4662d805735c21', 'x-b3-traceid': '5ea0f5787867ae3fd3a3da9ae5d45d9e', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': 'af7ca5cd5752.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-21 13:57:52 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: tools/call, ID: 1
2025-11-21 13:57:52 | INFO     | mcp_server_multi_kb.py:364 | üîß Tool call: chat_with_kb
2025-11-21 13:57:52 | DEBUG    | mcp_server_multi_kb.py:365 | Arguments: {'kb_name': 'kb_gun_law_v2', 'query': '‡∏Ç‡∏≠‡∏õ‡∏∑‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏Å‡∏µ‡∏¨‡∏≤‡πÉ‡∏ä‡πâ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏≠‡∏∞‡πÑ‡∏£‡∏ö‡πâ‡∏≤‡∏á', 'session_id': 'session_20231120_001', 'top_k': 5}
2025-11-21 13:57:56 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (4004.87ms)
2025-11-21 14:30:54 | INFO     | logger.py:76 | ‚úÖ Logger initialized: mcp_server
2025-11-21 14:30:54 | DEBUG    | logger.py:77 | Log file: /Users/pond500/RAG/mcp_rag-main/logs/server.log
2025-11-21 14:30:55 | INFO     | mcp_server_multi_kb.py:38 | üöÄ Starting Multi-KB MCP Server...
2025-11-21 14:30:55 | INFO     | multi_kb_rag.py:45 | üöÄ Initializing Multi-Knowledge Base RAG System...
2025-11-21 14:30:55 | DEBUG    | multi_kb_rag.py:52 | Qdrant client: localhost:6333
2025-11-21 14:31:03 | INFO     | multi_kb_rag.py:82 | ‚úÖ Multi-KB RAG System initialized
2025-11-21 14:31:03 | INFO     | mcp_server_multi_kb.py:43 | ‚úÖ Multi-KB MCP Server ready
2025-11-21 14:31:34 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-21 14:31:34 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '4ff8b1db1d38.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '169', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=f4ae8ab4cd3742dfbbc5590609da2fb5,sentry-sample_rate=0.0,sentry-sampled=false,sentry-sample_rand=0.914437', 'content-type': 'application/json', 'sentry-trace': 'f4ae8ab4cd3742dfbbc5590609da2fb5-b17fb14923a4b0da-0', 'traceparent': '00-3126953e75c1771667767ea851e88ffa-18861096759f7d84-00', 'x-b3-sampled': '0', 'x-b3-spanid': '18861096759f7d84', 'x-b3-traceid': '3126953e75c1771667767ea851e88ffa', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '4ff8b1db1d38.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-21 14:31:34 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-21 14:31:34 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-21 14:31:34 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-21 14:31:34 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.27ms)
2025-11-21 14:31:34 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-21 14:31:34 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '4ff8b1db1d38.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=f4ae8ab4cd3742dfbbc5590609da2fb5,sentry-sample_rate=0.0,sentry-sampled=false,sentry-sample_rand=0.914437', 'content-type': 'application/json', 'sentry-trace': 'f4ae8ab4cd3742dfbbc5590609da2fb5-8ca97be8e6416298-0', 'traceparent': '00-bf90e066f83d5efd163afcd96e7cf86a-f6223404471c0d28-01', 'x-b3-sampled': '1', 'x-b3-spanid': 'f6223404471c0d28', 'x-b3-traceid': 'bf90e066f83d5efd163afcd96e7cf86a', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '4ff8b1db1d38.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-21 14:31:34 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-21 14:31:34 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-21 14:31:34 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.41ms)
2025-11-21 14:31:34 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-21 14:31:34 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '4ff8b1db1d38.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '51', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=f4ae8ab4cd3742dfbbc5590609da2fb5,sentry-sample_rate=0.0,sentry-sampled=false,sentry-sample_rand=0.914437', 'content-type': 'application/json', 'sentry-trace': 'f4ae8ab4cd3742dfbbc5590609da2fb5-bf097d0533a7d7e7-0', 'traceparent': '00-5aacd5f9dcea8780164b7367c00ecf1b-86b3cb763267880a-01', 'x-b3-sampled': '1', 'x-b3-spanid': '86b3cb763267880a', 'x-b3-traceid': '5aacd5f9dcea8780164b7367c00ecf1b', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '4ff8b1db1d38.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-21 14:31:34 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: tools/list, ID: 1
2025-11-21 14:31:34 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.24ms)
2025-11-21 14:31:36 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-21 14:31:36 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '4ff8b1db1d38.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '169', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=f4ae8ab4cd3742dfbbc5590609da2fb5,sentry-sample_rate=0.0,sentry-sampled=false,sentry-sample_rand=0.914437', 'content-type': 'application/json', 'sentry-trace': 'f4ae8ab4cd3742dfbbc5590609da2fb5-9722787317ab5d9e-0', 'traceparent': '00-80267523944f537067bdded391fccb3d-502db05bb3008293-00', 'x-b3-sampled': '0', 'x-b3-spanid': '502db05bb3008293', 'x-b3-traceid': '80267523944f537067bdded391fccb3d', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '4ff8b1db1d38.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-21 14:31:36 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-21 14:31:36 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-21 14:31:36 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-21 14:31:36 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.45ms)
2025-11-21 14:31:37 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-21 14:31:37 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '4ff8b1db1d38.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=f4ae8ab4cd3742dfbbc5590609da2fb5,sentry-sample_rate=0.0,sentry-sampled=false,sentry-sample_rand=0.914437', 'content-type': 'application/json', 'sentry-trace': 'f4ae8ab4cd3742dfbbc5590609da2fb5-a89b8e28daf67411-0', 'traceparent': '00-f6ebcc53310df9f0e9fc29e5bfc04c5f-e95ca48d375dac1f-00', 'x-b3-sampled': '0', 'x-b3-spanid': 'e95ca48d375dac1f', 'x-b3-traceid': 'f6ebcc53310df9f0e9fc29e5bfc04c5f', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '4ff8b1db1d38.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-21 14:31:37 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-21 14:31:37 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-21 14:31:37 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.58ms)
2025-11-21 14:31:37 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-21 14:31:37 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '4ff8b1db1d38.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '169', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=f4ae8ab4cd3742dfbbc5590609da2fb5,sentry-sample_rate=0.0,sentry-sampled=false,sentry-sample_rand=0.914437', 'content-type': 'application/json', 'sentry-trace': 'f4ae8ab4cd3742dfbbc5590609da2fb5-a6c9dfa53d98c4fd-0', 'traceparent': '00-e3e2432df60d9175df0fc198154b866e-fe9f22134aa8fb56-00', 'x-b3-sampled': '0', 'x-b3-spanid': 'fe9f22134aa8fb56', 'x-b3-traceid': 'e3e2432df60d9175df0fc198154b866e', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '4ff8b1db1d38.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-21 14:31:37 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-21 14:31:37 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-21 14:31:37 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-21 14:31:37 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (1.34ms)
2025-11-21 14:31:38 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-21 14:31:38 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '4ff8b1db1d38.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=f4ae8ab4cd3742dfbbc5590609da2fb5,sentry-sample_rate=0.0,sentry-sampled=false,sentry-sample_rand=0.914437', 'content-type': 'application/json', 'sentry-trace': 'f4ae8ab4cd3742dfbbc5590609da2fb5-bb2277e20c1491ea-0', 'traceparent': '00-05c3a4f5c9fe18099e83835b9b66ac67-d7e624ee61555c66-00', 'x-b3-sampled': '0', 'x-b3-spanid': 'd7e624ee61555c66', 'x-b3-traceid': '05c3a4f5c9fe18099e83835b9b66ac67', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '4ff8b1db1d38.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-21 14:31:38 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-21 14:31:38 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-21 14:31:38 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.91ms)
2025-11-21 14:31:38 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-21 14:31:38 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '4ff8b1db1d38.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '51', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=f4ae8ab4cd3742dfbbc5590609da2fb5,sentry-sample_rate=0.0,sentry-sampled=false,sentry-sample_rand=0.914437', 'content-type': 'application/json', 'sentry-trace': 'f4ae8ab4cd3742dfbbc5590609da2fb5-831cd64b7799a1bf-0', 'traceparent': '00-23fe9437c22a721b2ef25fc3a86ba4f2-40bca003b108941f-00', 'x-b3-sampled': '0', 'x-b3-spanid': '40bca003b108941f', 'x-b3-traceid': '23fe9437c22a721b2ef25fc3a86ba4f2', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '4ff8b1db1d38.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-21 14:31:38 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: tools/list, ID: 1
2025-11-21 14:31:38 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.07ms)
2025-11-21 14:32:32 | INFO     | logger.py:76 | ‚úÖ Logger initialized: mcp_server
2025-11-21 14:32:32 | DEBUG    | logger.py:77 | Log file: /Users/pond500/RAG/mcp_rag-main/logs/server.log
2025-11-21 14:32:33 | INFO     | mcp_server_multi_kb.py:38 | üöÄ Starting Multi-KB MCP Server...
2025-11-21 14:32:33 | INFO     | multi_kb_rag.py:45 | üöÄ Initializing Multi-Knowledge Base RAG System...
2025-11-21 14:32:33 | DEBUG    | multi_kb_rag.py:52 | Qdrant client: localhost:6333
2025-11-21 14:32:41 | INFO     | multi_kb_rag.py:82 | ‚úÖ Multi-KB RAG System initialized
2025-11-21 14:32:41 | INFO     | mcp_server_multi_kb.py:43 | ‚úÖ Multi-KB MCP Server ready
2025-11-21 14:33:01 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-21 14:33:01 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'a6c370cf5b86.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '169', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'traceparent': '00-be6fed4a8740f8483193bbdc47799f1e-35a85b43065d06d4-00', 'x-b3-sampled': '0', 'x-b3-spanid': '35a85b43065d06d4', 'x-b3-traceid': 'be6fed4a8740f8483193bbdc47799f1e', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': 'a6c370cf5b86.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-21 14:33:01 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-21 14:33:01 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-21 14:33:01 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-21 14:33:01 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.05ms)
2025-11-21 14:33:02 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-21 14:33:02 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'a6c370cf5b86.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'traceparent': '00-3b719a7e5747af14c00244f025e5e979-59e6f2fa65f54130-00', 'x-b3-sampled': '0', 'x-b3-spanid': '59e6f2fa65f54130', 'x-b3-traceid': '3b719a7e5747af14c00244f025e5e979', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': 'a6c370cf5b86.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-21 14:33:02 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-21 14:33:02 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-21 14:33:02 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.42ms)
2025-11-21 14:33:02 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-21 14:33:02 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'a6c370cf5b86.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '51', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'traceparent': '00-fb089ab7c09bd7a3359b3d3672f75154-3a4a9384851945bb-00', 'x-b3-sampled': '0', 'x-b3-spanid': '3a4a9384851945bb', 'x-b3-traceid': 'fb089ab7c09bd7a3359b3d3672f75154', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': 'a6c370cf5b86.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-21 14:33:02 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: tools/list, ID: 1
2025-11-21 14:33:02 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (1.64ms)
2025-11-21 14:33:03 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-21 14:33:03 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'a6c370cf5b86.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '169', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=3e3e96fafac246adbb94b77b9b8c76da,sentry-sample_rate=0.0,sentry-sampled=false,sentry-sample_rand=0.276122', 'content-type': 'application/json', 'sentry-trace': '3e3e96fafac246adbb94b77b9b8c76da-a1fd3fc740bc4477-0', 'traceparent': '00-1bb3c44c5828601deac306a928b382b4-a7df5ccbc7246da3-00', 'x-b3-sampled': '0', 'x-b3-spanid': 'a7df5ccbc7246da3', 'x-b3-traceid': '1bb3c44c5828601deac306a928b382b4', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': 'a6c370cf5b86.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-21 14:33:03 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-21 14:33:03 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-21 14:33:03 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-21 14:33:03 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (1.86ms)
2025-11-21 14:33:03 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-21 14:33:03 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'a6c370cf5b86.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=3e3e96fafac246adbb94b77b9b8c76da,sentry-sample_rate=0.0,sentry-sampled=false,sentry-sample_rand=0.276122', 'content-type': 'application/json', 'sentry-trace': '3e3e96fafac246adbb94b77b9b8c76da-988f144e40570711-0', 'traceparent': '00-19172f0f552e6d9400a778cd99eba5a7-f273d327103c4a2e-01', 'x-b3-sampled': '1', 'x-b3-spanid': 'f273d327103c4a2e', 'x-b3-traceid': '19172f0f552e6d9400a778cd99eba5a7', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': 'a6c370cf5b86.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-21 14:33:03 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-21 14:33:03 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-21 14:33:03 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.46ms)
2025-11-21 14:33:04 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-21 14:33:04 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'a6c370cf5b86.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '169', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=3e3e96fafac246adbb94b77b9b8c76da,sentry-sample_rate=0.0,sentry-sampled=false,sentry-sample_rand=0.276122', 'content-type': 'application/json', 'sentry-trace': '3e3e96fafac246adbb94b77b9b8c76da-a76561bcde35c198-0', 'traceparent': '00-de3fabed53cf3d7d3778228a118be6ce-a2ec4868c3450a82-00', 'x-b3-sampled': '0', 'x-b3-spanid': 'a2ec4868c3450a82', 'x-b3-traceid': 'de3fabed53cf3d7d3778228a118be6ce', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': 'a6c370cf5b86.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-21 14:33:04 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-21 14:33:04 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-21 14:33:04 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-21 14:33:04 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.50ms)
2025-11-21 14:33:04 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-21 14:33:04 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'a6c370cf5b86.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=3e3e96fafac246adbb94b77b9b8c76da,sentry-sample_rate=0.0,sentry-sampled=false,sentry-sample_rand=0.276122', 'content-type': 'application/json', 'sentry-trace': '3e3e96fafac246adbb94b77b9b8c76da-b899775e15a9c33a-0', 'traceparent': '00-029ec86fca3e9e52c200aa83b5641c1a-1053e145d4641b04-00', 'x-b3-sampled': '0', 'x-b3-spanid': '1053e145d4641b04', 'x-b3-traceid': '029ec86fca3e9e52c200aa83b5641c1a', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': 'a6c370cf5b86.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-21 14:33:04 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-21 14:33:04 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-21 14:33:04 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.66ms)
2025-11-21 14:33:05 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-21 14:33:05 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'a6c370cf5b86.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '51', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=3e3e96fafac246adbb94b77b9b8c76da,sentry-sample_rate=0.0,sentry-sampled=false,sentry-sample_rand=0.276122', 'content-type': 'application/json', 'sentry-trace': '3e3e96fafac246adbb94b77b9b8c76da-82d00ee28f8db784-0', 'traceparent': '00-a642c3ff9eddf7278530245fbc13c118-faf3b701137c9ce9-00', 'x-b3-sampled': '0', 'x-b3-spanid': 'faf3b701137c9ce9', 'x-b3-traceid': 'a642c3ff9eddf7278530245fbc13c118', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': 'a6c370cf5b86.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-21 14:33:05 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: tools/list, ID: 1
2025-11-21 14:33:05 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.12ms)
2025-11-21 14:45:46 | INFO     | logger.py:76 | ‚úÖ Logger initialized: mcp_server
2025-11-21 14:45:46 | DEBUG    | logger.py:77 | Log file: /Users/pond500/RAG/mcp_rag-main/logs/server.log
2025-11-21 14:45:47 | INFO     | mcp_server_multi_kb.py:38 | üöÄ Starting Multi-KB MCP Server...
2025-11-21 14:45:47 | INFO     | multi_kb_rag.py:45 | üöÄ Initializing Multi-Knowledge Base RAG System...
2025-11-21 14:45:47 | DEBUG    | multi_kb_rag.py:52 | Qdrant client: localhost:6333
2025-11-21 14:46:04 | INFO     | multi_kb_rag.py:82 | ‚úÖ Multi-KB RAG System initialized
2025-11-21 14:46:04 | INFO     | mcp_server_multi_kb.py:43 | ‚úÖ Multi-KB MCP Server ready
2025-11-21 14:46:17 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-21 14:46:17 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '1457e8e31cbe.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '169', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'traceparent': '00-ba7568f630aa616f624b9c2b0d80b2e0-957629c354709524-00', 'x-b3-sampled': '0', 'x-b3-spanid': '957629c354709524', 'x-b3-traceid': 'ba7568f630aa616f624b9c2b0d80b2e0', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '1457e8e31cbe.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-21 14:46:17 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-21 14:46:17 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-21 14:46:17 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-21 14:46:17 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.25ms)
2025-11-21 14:46:17 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-21 14:46:17 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '1457e8e31cbe.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'traceparent': '00-c81f30fc51595e0cab2109b614bd2a4c-bbc80584663d3271-00', 'x-b3-sampled': '0', 'x-b3-spanid': 'bbc80584663d3271', 'x-b3-traceid': 'c81f30fc51595e0cab2109b614bd2a4c', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '1457e8e31cbe.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-21 14:46:17 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-21 14:46:17 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-21 14:46:17 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.38ms)
2025-11-21 14:46:18 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-21 14:46:18 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '1457e8e31cbe.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '51', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'traceparent': '00-3188d1b6a986d2559f5bfa3b151d5a87-574316497de0e0df-00', 'x-b3-sampled': '0', 'x-b3-spanid': '574316497de0e0df', 'x-b3-traceid': '3188d1b6a986d2559f5bfa3b151d5a87', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '1457e8e31cbe.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-21 14:46:18 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: tools/list, ID: 1
2025-11-21 14:46:18 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.99ms)
2025-11-21 14:46:21 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-21 14:46:21 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '1457e8e31cbe.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '169', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'traceparent': '00-8ce5533f34b8c58a3482253b4edd322d-5a3f4d9d3eef835b-00', 'x-b3-sampled': '0', 'x-b3-spanid': '5a3f4d9d3eef835b', 'x-b3-traceid': '8ce5533f34b8c58a3482253b4edd322d', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '1457e8e31cbe.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-21 14:46:21 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-21 14:46:21 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-21 14:46:21 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-21 14:46:21 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (1.46ms)
2025-11-21 14:46:22 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-21 14:46:22 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '1457e8e31cbe.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'traceparent': '00-5911b340df19c18466ba10f8794a5460-48f9f60fe06e3c5e-00', 'x-b3-sampled': '0', 'x-b3-spanid': '48f9f60fe06e3c5e', 'x-b3-traceid': '5911b340df19c18466ba10f8794a5460', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '1457e8e31cbe.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-21 14:46:22 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-21 14:46:22 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-21 14:46:22 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.54ms)
2025-11-21 14:46:23 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-21 14:46:23 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '1457e8e31cbe.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '169', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'traceparent': '00-7ff4a9523ebb6a57c0b2024db3d2df4c-e5a667d3ed410d12-00', 'x-b3-sampled': '0', 'x-b3-spanid': 'e5a667d3ed410d12', 'x-b3-traceid': '7ff4a9523ebb6a57c0b2024db3d2df4c', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '1457e8e31cbe.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-21 14:46:23 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-21 14:46:23 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-21 14:46:23 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-21 14:46:23 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (14.46ms)
2025-11-21 14:46:23 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-21 14:46:23 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '1457e8e31cbe.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'traceparent': '00-cdb885602946d81ff6ab4ff3ab62dd67-bf8cca0fb11523f1-00', 'x-b3-sampled': '0', 'x-b3-spanid': 'bf8cca0fb11523f1', 'x-b3-traceid': 'cdb885602946d81ff6ab4ff3ab62dd67', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '1457e8e31cbe.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-21 14:46:23 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-21 14:46:23 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-21 14:46:23 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.27ms)
2025-11-21 14:46:23 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-21 14:46:23 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '1457e8e31cbe.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '51', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'traceparent': '00-9eb735a39327263759d3c2db43efb4ab-f272144111ef6b6f-00', 'x-b3-sampled': '0', 'x-b3-spanid': 'f272144111ef6b6f', 'x-b3-traceid': '9eb735a39327263759d3c2db43efb4ab', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '1457e8e31cbe.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-21 14:46:23 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: tools/list, ID: 1
2025-11-21 14:46:23 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.23ms)
2025-11-21 14:48:47 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-21 14:48:47 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '1457e8e31cbe.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '169', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=8672e603bbf240ee8d261843b010c4d0,sentry-sample_rate=0.0,sentry-sampled=false,sentry-sample_rand=0.571412', 'content-type': 'application/json', 'sentry-trace': '8672e603bbf240ee8d261843b010c4d0-b3fe3a1cf13f83f2-0', 'traceparent': '00-67a78d62d13a502182d806c3b4423c40-97bb9f45dffa41dc-00', 'x-b3-sampled': '0', 'x-b3-spanid': '97bb9f45dffa41dc', 'x-b3-traceid': '67a78d62d13a502182d806c3b4423c40', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '1457e8e31cbe.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-21 14:48:47 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-21 14:48:47 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-21 14:48:47 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-21 14:48:47 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (4.15ms)
2025-11-21 14:48:48 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-21 14:48:48 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '1457e8e31cbe.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=8672e603bbf240ee8d261843b010c4d0,sentry-sample_rate=0.0,sentry-sampled=false,sentry-sample_rand=0.571412', 'content-type': 'application/json', 'sentry-trace': '8672e603bbf240ee8d261843b010c4d0-80b639e7ef91c65a-0', 'traceparent': '00-f4aca986ba55fbe3203c2ba718280ec8-48168a90feed20ba-00', 'x-b3-sampled': '0', 'x-b3-spanid': '48168a90feed20ba', 'x-b3-traceid': 'f4aca986ba55fbe3203c2ba718280ec8', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '1457e8e31cbe.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-21 14:48:48 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-21 14:48:48 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-21 14:48:48 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.14ms)
2025-11-21 14:48:48 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-21 14:48:48 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '1457e8e31cbe.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '484', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=8672e603bbf240ee8d261843b010c4d0,sentry-sample_rate=0.0,sentry-sampled=false,sentry-sample_rand=0.571412', 'content-type': 'application/json', 'sentry-trace': '8672e603bbf240ee8d261843b010c4d0-800d8a17152d8edd-0', 'traceparent': '00-8ab71507229a0e6763cb32256ef3f206-a45063c864cc3482-00', 'x-b3-sampled': '0', 'x-b3-spanid': 'a45063c864cc3482', 'x-b3-traceid': '8ab71507229a0e6763cb32256ef3f206', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '1457e8e31cbe.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-21 14:48:48 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: tools/call, ID: 1
2025-11-21 14:48:48 | INFO     | mcp_server_multi_kb.py:364 | üîß Tool call: chat_global
2025-11-21 14:48:48 | DEBUG    | mcp_server_multi_kb.py:365 | Arguments: {'query': '‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡πÉ‡∏ö‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡∏õ.3 ‡πÉ‡∏ô‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡πÑ‡∏ó‡∏¢', 'session_id': 'session_20251120_01', 'top_k': 5}
2025-11-21 14:48:48 | INFO     | multi_kb_rag.py:772 | üåê Auto-routing query: '‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡πÉ‡∏ö‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡∏õ.3 ‡πÉ‡∏ô‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡πÑ‡∏ó‡∏¢...'
2025-11-21 14:48:48 | WARNING  | multi_kb_rag.py:715 | Router index is empty (no KBs registered)
2025-11-21 14:48:48 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (47.97ms)
2025-11-21 14:48:51 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-21 14:48:51 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '1457e8e31cbe.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '169', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=8672e603bbf240ee8d261843b010c4d0,sentry-sample_rate=0.0,sentry-sampled=false,sentry-sample_rand=0.571412', 'content-type': 'application/json', 'sentry-trace': '8672e603bbf240ee8d261843b010c4d0-a97c48d5af62bede-0', 'traceparent': '00-7cc14ab3de31aaac10e7c1b8bf614126-9f2d2a8539247eab-01', 'x-b3-sampled': '1', 'x-b3-spanid': '9f2d2a8539247eab', 'x-b3-traceid': '7cc14ab3de31aaac10e7c1b8bf614126', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '1457e8e31cbe.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-21 14:48:51 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-21 14:48:51 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-21 14:48:51 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-21 14:48:51 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.66ms)
2025-11-21 14:48:52 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-21 14:48:52 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '1457e8e31cbe.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=8672e603bbf240ee8d261843b010c4d0,sentry-sample_rate=0.0,sentry-sampled=false,sentry-sample_rand=0.571412', 'content-type': 'application/json', 'sentry-trace': '8672e603bbf240ee8d261843b010c4d0-b0c982151bfa3b5d-0', 'traceparent': '00-cf2d17051be12f2d1c55157dfe371756-17bb8de44e486c6e-00', 'x-b3-sampled': '0', 'x-b3-spanid': '17bb8de44e486c6e', 'x-b3-traceid': 'cf2d17051be12f2d1c55157dfe371756', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '1457e8e31cbe.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-21 14:48:52 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-21 14:48:52 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-21 14:48:52 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.34ms)
2025-11-21 14:48:52 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-21 14:48:52 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '1457e8e31cbe.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '560', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=8672e603bbf240ee8d261843b010c4d0,sentry-sample_rate=0.0,sentry-sampled=false,sentry-sample_rand=0.571412', 'content-type': 'application/json', 'sentry-trace': '8672e603bbf240ee8d261843b010c4d0-b321ac74eb748884-0', 'traceparent': '00-41983a5e1949b34215c1c36ca5e204eb-c6c669470683eca5-01', 'x-b3-sampled': '1', 'x-b3-spanid': 'c6c669470683eca5', 'x-b3-traceid': '41983a5e1949b34215c1c36ca5e204eb', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '1457e8e31cbe.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-21 14:48:52 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: tools/call, ID: 1
2025-11-21 14:48:52 | INFO     | mcp_server_multi_kb.py:364 | üîß Tool call: chat_with_kb
2025-11-21 14:48:52 | DEBUG    | mcp_server_multi_kb.py:365 | Arguments: {'kb_name': 'kb_gun_law_v2', 'query': '‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡πÉ‡∏ö‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡∏õ.3 (‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏õ.3) ‡πÉ‡∏ô‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡πÑ‡∏ó‡∏¢', 'session_id': 'session_20251120_01', 'top_k': 5}
2025-11-21 14:49:01 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (8616.63ms)
2025-11-21 14:49:04 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-21 14:49:04 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '1457e8e31cbe.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '169', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=8672e603bbf240ee8d261843b010c4d0,sentry-sample_rate=0.0,sentry-sampled=false,sentry-sample_rand=0.571412', 'content-type': 'application/json', 'sentry-trace': '8672e603bbf240ee8d261843b010c4d0-b1aa273b121c42cc-0', 'traceparent': '00-06832c20c10bb631cda7fc3c4b4dcde7-fd599ee1cffe83aa-00', 'x-b3-sampled': '0', 'x-b3-spanid': 'fd599ee1cffe83aa', 'x-b3-traceid': '06832c20c10bb631cda7fc3c4b4dcde7', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '1457e8e31cbe.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-21 14:49:04 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-21 14:49:04 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-21 14:49:04 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-21 14:49:04 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (3.24ms)
2025-11-21 14:49:05 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-21 14:49:05 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '1457e8e31cbe.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=8672e603bbf240ee8d261843b010c4d0,sentry-sample_rate=0.0,sentry-sampled=false,sentry-sample_rand=0.571412', 'content-type': 'application/json', 'sentry-trace': '8672e603bbf240ee8d261843b010c4d0-afe428fd956bb225-0', 'traceparent': '00-1d5e18a1afad90197b2d7317a8ff395b-b93e6edf85f00fd6-00', 'x-b3-sampled': '0', 'x-b3-spanid': 'b93e6edf85f00fd6', 'x-b3-traceid': '1d5e18a1afad90197b2d7317a8ff395b', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '1457e8e31cbe.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-21 14:49:05 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-21 14:49:05 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-21 14:49:05 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.47ms)
2025-11-21 14:49:05 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-21 14:49:05 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '1457e8e31cbe.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '453', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=8672e603bbf240ee8d261843b010c4d0,sentry-sample_rate=0.0,sentry-sampled=false,sentry-sample_rand=0.571412', 'content-type': 'application/json', 'sentry-trace': '8672e603bbf240ee8d261843b010c4d0-9437123d55a5acc9-0', 'traceparent': '00-117ccbd48b73c40cc31b85a53d989909-6d408039b68133ad-00', 'x-b3-sampled': '0', 'x-b3-spanid': '6d408039b68133ad', 'x-b3-traceid': '117ccbd48b73c40cc31b85a53d989909', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '1457e8e31cbe.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-21 14:49:05 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: tools/call, ID: 1
2025-11-21 14:49:05 | INFO     | mcp_server_multi_kb.py:364 | üîß Tool call: chat_with_kb
2025-11-21 14:49:05 | DEBUG    | mcp_server_multi_kb.py:365 | Arguments: {'kb_name': 'kb_gun_law_v2', 'query': '‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡πÉ‡∏ö‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡∏≠‡∏≤‡∏ß‡∏∏‡∏ò‡∏õ‡∏∑‡∏ô‡πÅ‡∏ö‡∏ö ‡∏õ.3', 'session_id': 'session_20251120_01', 'top_k': 5}
2025-11-21 14:49:10 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (4895.92ms)
2025-11-24 14:58:55 | INFO     | logger.py:76 | ‚úÖ Logger initialized: mcp_server
2025-11-24 14:58:55 | DEBUG    | logger.py:77 | Log file: /Users/pond500/RAG/mcp_rag-main/logs/server.log
2025-11-24 14:58:55 | INFO     | mcp_server_multi_kb.py:38 | üöÄ Starting Multi-KB MCP Server...
2025-11-24 14:58:55 | INFO     | multi_kb_rag.py:45 | üöÄ Initializing Multi-Knowledge Base RAG System...
2025-11-24 14:58:55 | DEBUG    | multi_kb_rag.py:52 | Qdrant client: localhost:6333
2025-11-24 14:59:05 | ERROR    | multi_kb_rag.py:104 | ‚ö†Ô∏è Failed to create router index: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/httpx/_transports/default.py", line 250, in handle_request
    resp = self._pool.handle_request(req)
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/httpcore/_sync/connection_pool.py", line 256, in handle_request
    raise exc from None
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/httpcore/_sync/connection_pool.py", line 236, in handle_request
    response = connection.handle_request(
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/httpcore/_sync/connection.py", line 101, in handle_request
    raise exc
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/httpcore/_sync/connection.py", line 78, in handle_request
    stream = self._connect(request)
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/httpcore/_sync/connection.py", line 124, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/httpcore/_backends/sync.py", line 207, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/homebrew/Cellar/python@3.10/3.10.19_1/Frameworks/Python.framework/Versions/3.10/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/http/api_client.py", line 106, in send_inner
    response = self._client.send(request)
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/httpx/_client.py", line 914, in send
    response = self._send_handling_auth(
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/httpx/_client.py", line 942, in _send_handling_auth
    response = self._send_handling_redirects(
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/httpx/_client.py", line 979, in _send_handling_redirects
    response = self._send_single_request(request)
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/httpx/_client.py", line 1014, in _send_single_request
    response = transport.handle_request(request)
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/httpx/_transports/default.py", line 249, in handle_request
    with map_httpcore_exceptions():
  File "/opt/homebrew/Cellar/python@3.10/3.10.19_1/Frameworks/Python.framework/Versions/3.10/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/pond500/RAG/mcp_rag-main/app/multi_kb_rag.py", line 98, in _ensure_router_index
    self.qdrant_client.create_collection(
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/qdrant_client.py", line 2081, in create_collection
    return self._client.create_collection(
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/qdrant_remote.py", line 2637, in create_collection
    result: Optional[bool] = self.http.collections_api.create_collection(
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/http/api/collections_api.py", line 1170, in create_collection
    return self._build_for_create_collection(
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/http/api/collections_api.py", line 116, in _build_for_create_collection
    return self.api_client.request(
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/http/api_client.py", line 79, in request
    return self.send(request, type_)
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/http/api_client.py", line 96, in send
    response = self.middleware(request, self.send_inner)
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/http/api_client.py", line 205, in __call__
    return call_next(request)
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/http/api_client.py", line 108, in send_inner
    raise ResponseHandlingException(e)
qdrant_client.http.exceptions.ResponseHandlingException: [Errno 61] Connection refused
2025-11-24 14:59:05 | INFO     | multi_kb_rag.py:82 | ‚úÖ Multi-KB RAG System initialized
2025-11-24 14:59:05 | INFO     | mcp_server_multi_kb.py:43 | ‚úÖ Multi-KB MCP Server ready
2025-11-24 14:59:50 | INFO     | logger.py:76 | ‚úÖ Logger initialized: mcp_server
2025-11-24 14:59:50 | DEBUG    | logger.py:77 | Log file: /Users/pond500/RAG/mcp_rag-main/logs/server.log
2025-11-24 14:59:50 | INFO     | mcp_server_multi_kb.py:38 | üöÄ Starting Multi-KB MCP Server...
2025-11-24 14:59:50 | INFO     | multi_kb_rag.py:45 | üöÄ Initializing Multi-Knowledge Base RAG System...
2025-11-24 14:59:50 | DEBUG    | multi_kb_rag.py:52 | Qdrant client: localhost:6333
2025-11-24 15:00:00 | INFO     | multi_kb_rag.py:82 | ‚úÖ Multi-KB RAG System initialized
2025-11-24 15:00:00 | INFO     | mcp_server_multi_kb.py:43 | ‚úÖ Multi-KB MCP Server ready
2025-11-24 15:12:35 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:12:35 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '7cdc655fc331.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '214', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '7cdc655fc331.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:12:35 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-24 15:12:35 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-24 15:12:35 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-24 15:12:35 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (3.01ms)
2025-11-24 15:12:36 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:12:36 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '7cdc655fc331.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '7cdc655fc331.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:12:36 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-24 15:12:36 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-24 15:12:36 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (1.72ms)
2025-11-24 15:13:07 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:13:07 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '7cdc655fc331.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '214', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '7cdc655fc331.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:13:07 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-24 15:13:07 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-24 15:13:07 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-24 15:13:07 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.45ms)
2025-11-24 15:13:07 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:13:07 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '7cdc655fc331.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '7cdc655fc331.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:13:07 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-24 15:13:07 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-24 15:13:07 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.34ms)
2025-11-24 15:13:07 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:13:07 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '7cdc655fc331.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '51', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '7cdc655fc331.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:13:07 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: tools/list, ID: 1
2025-11-24 15:13:07 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.16ms)
2025-11-24 15:16:40 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:16:40 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '7cdc655fc331.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '214', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '7cdc655fc331.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:16:40 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-24 15:16:40 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-24 15:16:40 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-24 15:16:40 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (3.67ms)
2025-11-24 15:16:40 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:16:40 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '7cdc655fc331.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '7cdc655fc331.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:16:40 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-24 15:16:40 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-24 15:16:40 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (1.98ms)
2025-11-24 15:27:48 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:27:48 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '7cdc655fc331.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '214', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '7cdc655fc331.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:27:48 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-24 15:27:48 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-24 15:27:48 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-24 15:27:48 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.23ms)
2025-11-24 15:27:48 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:27:48 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '7cdc655fc331.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '7cdc655fc331.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:27:48 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-24 15:27:48 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-24 15:27:48 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.73ms)
2025-11-24 15:28:07 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:28:07 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '7cdc655fc331.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '214', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '7cdc655fc331.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:28:07 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-24 15:28:07 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-24 15:28:07 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-24 15:28:07 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (4.04ms)
2025-11-24 15:28:08 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:28:08 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '7cdc655fc331.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '7cdc655fc331.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:28:08 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-24 15:28:08 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-24 15:28:08 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (1.96ms)
2025-11-24 15:30:59 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:30:59 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '7cdc655fc331.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '214', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '7cdc655fc331.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:30:59 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-24 15:30:59 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-24 15:30:59 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-24 15:30:59 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (5.30ms)
2025-11-24 15:30:59 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:30:59 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '7cdc655fc331.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '7cdc655fc331.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:30:59 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-24 15:30:59 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-24 15:30:59 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.91ms)
2025-11-24 15:31:08 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:31:08 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '7cdc655fc331.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '214', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '7cdc655fc331.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:31:08 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-24 15:31:08 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-24 15:31:08 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-24 15:31:08 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.75ms)
2025-11-24 15:31:08 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:31:08 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '7cdc655fc331.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '7cdc655fc331.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:31:08 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-24 15:31:08 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-24 15:31:08 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.15ms)
2025-11-24 15:31:08 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:31:08 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '7cdc655fc331.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '214', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '7cdc655fc331.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:31:08 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-24 15:31:08 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-24 15:31:08 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-24 15:31:08 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.36ms)
2025-11-24 15:31:08 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:31:08 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '7cdc655fc331.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '7cdc655fc331.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:31:08 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-24 15:31:08 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-24 15:31:08 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (3.03ms)
2025-11-24 15:31:08 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:31:08 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '7cdc655fc331.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '51', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '7cdc655fc331.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:31:08 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: tools/list, ID: 1
2025-11-24 15:31:08 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.48ms)
2025-11-24 15:31:30 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:31:30 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '7cdc655fc331.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '214', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '7cdc655fc331.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:31:30 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-24 15:31:30 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-24 15:31:30 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-24 15:31:30 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.30ms)
2025-11-24 15:31:30 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:31:30 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '7cdc655fc331.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '7cdc655fc331.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:31:30 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-24 15:31:30 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-24 15:31:30 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.52ms)
2025-11-24 15:31:54 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:31:54 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '7cdc655fc331.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '214', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '7cdc655fc331.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:31:54 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-24 15:31:54 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-24 15:31:54 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-24 15:31:54 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.54ms)
2025-11-24 15:31:54 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:31:54 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '7cdc655fc331.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '7cdc655fc331.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:31:54 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-24 15:31:54 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-24 15:31:54 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.44ms)
2025-11-24 15:31:55 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:31:55 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '7cdc655fc331.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '214', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '7cdc655fc331.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:31:55 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-24 15:31:55 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-24 15:31:55 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-24 15:31:55 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.71ms)
2025-11-24 15:31:55 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:31:55 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '7cdc655fc331.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '7cdc655fc331.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:31:55 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-24 15:31:55 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-24 15:31:55 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.21ms)
2025-11-24 15:31:55 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:31:55 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '7cdc655fc331.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '51', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '7cdc655fc331.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:31:55 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: tools/list, ID: 1
2025-11-24 15:31:55 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.17ms)
2025-11-24 15:33:51 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:33:51 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '7cdc655fc331.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '214', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '7cdc655fc331.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:33:51 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-24 15:33:51 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-24 15:33:51 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-24 15:33:51 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (3.52ms)
2025-11-24 15:33:51 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:33:51 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '7cdc655fc331.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '7cdc655fc331.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:33:51 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-24 15:33:51 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-24 15:33:51 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.14ms)
2025-11-24 15:33:51 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:33:51 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '7cdc655fc331.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '214', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '7cdc655fc331.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:33:51 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-24 15:33:51 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-24 15:33:51 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-24 15:33:51 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (1.93ms)
2025-11-24 15:33:52 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:33:52 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '7cdc655fc331.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '7cdc655fc331.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:33:52 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-24 15:33:52 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-24 15:33:52 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.77ms)
2025-11-24 15:33:52 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:33:52 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '7cdc655fc331.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '51', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '7cdc655fc331.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:33:52 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: tools/list, ID: 1
2025-11-24 15:33:52 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.57ms)
2025-11-24 15:34:32 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:34:32 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '7cdc655fc331.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '214', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '7cdc655fc331.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:34:32 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-24 15:34:32 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-24 15:34:32 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-24 15:34:32 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (3.11ms)
2025-11-24 15:34:32 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:34:32 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '7cdc655fc331.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '7cdc655fc331.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:34:32 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-24 15:34:32 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-24 15:34:32 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.39ms)
2025-11-24 15:34:33 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:34:33 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '7cdc655fc331.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '214', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '7cdc655fc331.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:34:33 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-24 15:34:33 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-24 15:34:33 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-24 15:34:33 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.44ms)
2025-11-24 15:34:33 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:34:33 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '7cdc655fc331.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '7cdc655fc331.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:34:33 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-24 15:34:33 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-24 15:34:33 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (1.80ms)
2025-11-24 15:34:33 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:34:33 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '7cdc655fc331.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '51', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '7cdc655fc331.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:34:33 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: tools/list, ID: 1
2025-11-24 15:34:33 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (1.40ms)
2025-11-24 15:34:34 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:34:34 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '7cdc655fc331.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '214', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '7cdc655fc331.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:34:34 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-24 15:34:34 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-24 15:34:34 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-24 15:34:34 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.26ms)
2025-11-24 15:34:34 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:34:34 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '7cdc655fc331.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '7cdc655fc331.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:34:34 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-24 15:34:34 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-24 15:34:34 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.35ms)
2025-11-24 15:34:34 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:34:34 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '7cdc655fc331.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '214', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '7cdc655fc331.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:34:34 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-24 15:34:34 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-24 15:34:34 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-24 15:34:34 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.65ms)
2025-11-24 15:34:35 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:34:35 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '7cdc655fc331.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '7cdc655fc331.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:34:35 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-24 15:34:35 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-24 15:34:35 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.39ms)
2025-11-24 15:34:35 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:34:35 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '7cdc655fc331.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '51', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '7cdc655fc331.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:34:35 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: tools/list, ID: 1
2025-11-24 15:34:35 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.08ms)
2025-11-24 15:40:06 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:40:06 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '7cdc655fc331.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '214', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '7cdc655fc331.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:40:06 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-24 15:40:06 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-24 15:40:06 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-24 15:40:06 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (5.41ms)
2025-11-24 15:40:07 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:40:07 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '7cdc655fc331.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '7cdc655fc331.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:40:07 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-24 15:40:07 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-24 15:40:07 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.84ms)
2025-11-24 15:40:07 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:40:07 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '7cdc655fc331.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '214', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '7cdc655fc331.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:40:07 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-24 15:40:07 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-24 15:40:07 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-24 15:40:07 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.84ms)
2025-11-24 15:40:07 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:40:07 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '7cdc655fc331.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '7cdc655fc331.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:40:07 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-24 15:40:07 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-24 15:40:07 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.78ms)
2025-11-24 15:40:07 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:40:07 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '7cdc655fc331.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '51', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '7cdc655fc331.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:40:07 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: tools/list, ID: 1
2025-11-24 15:40:07 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.42ms)
2025-11-24 15:49:58 | INFO     | logger.py:76 | ‚úÖ Logger initialized: mcp_server
2025-11-24 15:49:58 | DEBUG    | logger.py:77 | Log file: /Users/pond500/RAG/mcp_rag-main/logs/server.log
2025-11-24 15:49:59 | INFO     | mcp_server_multi_kb.py:38 | üöÄ Starting Multi-KB MCP Server...
2025-11-24 15:49:59 | INFO     | multi_kb_rag.py:45 | üöÄ Initializing Multi-Knowledge Base RAG System...
2025-11-24 15:49:59 | DEBUG    | multi_kb_rag.py:52 | Qdrant client: localhost:6333
2025-11-24 15:50:12 | INFO     | multi_kb_rag.py:82 | ‚úÖ Multi-KB RAG System initialized
2025-11-24 15:50:12 | INFO     | mcp_server_multi_kb.py:43 | ‚úÖ Multi-KB MCP Server ready
2025-11-24 15:50:46 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:50:46 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '325206039fdc.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '214', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '325206039fdc.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:50:46 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-24 15:50:46 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-24 15:50:46 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-24 15:50:46 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (1.89ms)
2025-11-24 15:50:46 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:50:46 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '325206039fdc.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '325206039fdc.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:50:46 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-24 15:50:46 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-24 15:50:46 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.47ms)
2025-11-24 15:50:47 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:50:47 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '325206039fdc.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '214', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '325206039fdc.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:50:47 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-24 15:50:47 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-24 15:50:47 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-24 15:50:47 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.45ms)
2025-11-24 15:50:47 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:50:47 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '325206039fdc.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '325206039fdc.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:50:47 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-24 15:50:47 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-24 15:50:47 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (1.90ms)
2025-11-24 15:50:47 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:50:47 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '325206039fdc.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '51', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '325206039fdc.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:50:47 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: tools/list, ID: 1
2025-11-24 15:50:47 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.14ms)
2025-11-24 15:56:06 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:56:06 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '325206039fdc.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '214', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '325206039fdc.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:56:06 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-24 15:56:06 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-24 15:56:06 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-24 15:56:06 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (3.85ms)
2025-11-24 15:56:06 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:56:06 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '325206039fdc.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '325206039fdc.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:56:06 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-24 15:56:06 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-24 15:56:06 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.30ms)
2025-11-24 15:56:06 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:56:06 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '325206039fdc.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '214', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '325206039fdc.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:56:06 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-24 15:56:06 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-24 15:56:06 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-24 15:56:06 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.27ms)
2025-11-24 15:56:07 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:56:07 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '325206039fdc.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '325206039fdc.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:56:07 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-24 15:56:07 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-24 15:56:07 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (1.74ms)
2025-11-24 15:56:07 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:56:07 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '325206039fdc.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '51', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '325206039fdc.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:56:07 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: tools/list, ID: 1
2025-11-24 15:56:07 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.75ms)
2025-11-24 15:56:40 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:56:40 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '325206039fdc.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '214', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '325206039fdc.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:56:40 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-24 15:56:40 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-24 15:56:40 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-24 15:56:40 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.76ms)
2025-11-24 15:56:41 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:56:41 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '325206039fdc.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '325206039fdc.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:56:41 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-24 15:56:41 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-24 15:56:41 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.64ms)
2025-11-24 15:56:41 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:56:41 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '325206039fdc.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '51', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '325206039fdc.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:56:41 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: tools/list, ID: 1
2025-11-24 15:56:41 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.14ms)
2025-11-24 15:57:02 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:57:02 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '325206039fdc.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '214', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '325206039fdc.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:57:02 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-24 15:57:02 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-24 15:57:02 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-24 15:57:02 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.79ms)
2025-11-24 15:57:02 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:57:02 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '325206039fdc.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '325206039fdc.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:57:02 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-24 15:57:02 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-24 15:57:02 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.30ms)
2025-11-24 15:57:02 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:57:02 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '325206039fdc.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '214', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '325206039fdc.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:57:02 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-24 15:57:02 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-24 15:57:02 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-24 15:57:02 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.47ms)
2025-11-24 15:57:03 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:57:03 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '325206039fdc.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '325206039fdc.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:57:03 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-24 15:57:03 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-24 15:57:03 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.27ms)
2025-11-24 15:57:03 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 15:57:03 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '325206039fdc.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '51', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '325206039fdc.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 15:57:03 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: tools/list, ID: 1
2025-11-24 15:57:03 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.18ms)
2025-11-24 16:07:13 | INFO     | logger.py:76 | ‚úÖ Logger initialized: mcp_server
2025-11-24 16:07:13 | DEBUG    | logger.py:77 | Log file: /Users/pond500/RAG/mcp_rag-main/logs/server.log
2025-11-24 16:07:14 | INFO     | mcp_server_multi_kb.py:38 | üöÄ Starting Multi-KB MCP Server...
2025-11-24 16:07:14 | INFO     | multi_kb_rag.py:45 | üöÄ Initializing Multi-Knowledge Base RAG System...
2025-11-24 16:07:14 | DEBUG    | multi_kb_rag.py:52 | Qdrant client: localhost:6333
2025-11-24 16:07:25 | INFO     | multi_kb_rag.py:82 | ‚úÖ Multi-KB RAG System initialized
2025-11-24 16:07:25 | INFO     | mcp_server_multi_kb.py:43 | ‚úÖ Multi-KB MCP Server ready
2025-11-24 16:08:19 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 16:08:19 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '4e05f1d061d1.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '214', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '4e05f1d061d1.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 16:08:19 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-24 16:08:19 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-24 16:08:19 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-24 16:08:19 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (1.96ms)
2025-11-24 16:08:19 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 16:08:19 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '4e05f1d061d1.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '4e05f1d061d1.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 16:08:19 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-24 16:08:19 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-24 16:08:19 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (1.66ms)
2025-11-24 16:08:19 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 16:08:19 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '4e05f1d061d1.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '214', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '4e05f1d061d1.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 16:08:19 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-24 16:08:19 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-24 16:08:19 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-24 16:08:19 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.77ms)
2025-11-24 16:08:19 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 16:08:19 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '4e05f1d061d1.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '4e05f1d061d1.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 16:08:19 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-24 16:08:19 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-24 16:08:19 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.09ms)
2025-11-24 16:08:20 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 16:08:20 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '4e05f1d061d1.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '51', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '4e05f1d061d1.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 16:08:20 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: tools/list, ID: 1
2025-11-24 16:08:20 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.45ms)
2025-11-24 16:09:29 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 16:09:29 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '4e05f1d061d1.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '214', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '4e05f1d061d1.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 16:09:29 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-24 16:09:29 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-24 16:09:29 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-24 16:09:29 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.39ms)
2025-11-24 16:09:29 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 16:09:29 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '4e05f1d061d1.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '4e05f1d061d1.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 16:09:29 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-24 16:09:29 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-24 16:09:29 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.62ms)
2025-11-24 16:09:29 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 16:09:29 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '4e05f1d061d1.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '51', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '4e05f1d061d1.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 16:09:29 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: tools/list, ID: 1
2025-11-24 16:09:29 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.08ms)
2025-11-24 16:10:37 | INFO     | logger.py:76 | ‚úÖ Logger initialized: mcp_server
2025-11-24 16:10:37 | DEBUG    | logger.py:77 | Log file: /Users/pond500/RAG/mcp_rag-main/logs/server.log
2025-11-24 16:10:39 | INFO     | mcp_server_multi_kb.py:38 | üöÄ Starting Multi-KB MCP Server...
2025-11-24 16:10:39 | INFO     | multi_kb_rag.py:45 | üöÄ Initializing Multi-Knowledge Base RAG System...
2025-11-24 16:10:39 | DEBUG    | multi_kb_rag.py:52 | Qdrant client: localhost:6333
2025-11-24 16:10:48 | INFO     | multi_kb_rag.py:82 | ‚úÖ Multi-KB RAG System initialized
2025-11-24 16:10:48 | INFO     | mcp_server_multi_kb.py:43 | ‚úÖ Multi-KB MCP Server ready
2025-11-24 16:12:24 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 16:12:24 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'dec5d2b02418.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '214', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': 'dec5d2b02418.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 16:12:24 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-24 16:12:24 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-24 16:12:24 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-24 16:12:24 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.39ms)
2025-11-24 16:12:24 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 16:12:24 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'dec5d2b02418.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': 'dec5d2b02418.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 16:12:24 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-24 16:12:24 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-24 16:12:24 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (1.48ms)
2025-11-24 16:12:24 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 16:12:24 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'dec5d2b02418.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '214', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': 'dec5d2b02418.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 16:12:24 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-24 16:12:24 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-24 16:12:24 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-24 16:12:24 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.46ms)
2025-11-24 16:12:24 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 16:12:24 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'dec5d2b02418.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': 'dec5d2b02418.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 16:12:24 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-24 16:12:24 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-24 16:12:24 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.78ms)
2025-11-24 16:12:24 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 16:12:24 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'dec5d2b02418.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '51', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': 'dec5d2b02418.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 16:12:24 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: tools/list, ID: 1
2025-11-24 16:12:24 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.34ms)
2025-11-24 16:17:36 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 16:17:36 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'dec5d2b02418.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '214', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': 'dec5d2b02418.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 16:17:36 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-24 16:17:36 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-24 16:17:36 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-24 16:17:36 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.65ms)
2025-11-24 16:17:36 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 16:17:36 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'dec5d2b02418.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': 'dec5d2b02418.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 16:17:36 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-24 16:17:36 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-24 16:17:36 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.09ms)
2025-11-24 16:17:37 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 16:17:37 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'dec5d2b02418.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '214', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': 'dec5d2b02418.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 16:17:37 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-24 16:17:37 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-24 16:17:37 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-24 16:17:37 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.58ms)
2025-11-24 16:17:37 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 16:17:37 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'dec5d2b02418.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': 'dec5d2b02418.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 16:17:37 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-24 16:17:37 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-24 16:17:37 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.40ms)
2025-11-24 16:17:37 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 16:17:37 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'dec5d2b02418.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '51', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': 'dec5d2b02418.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 16:17:37 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: tools/list, ID: 1
2025-11-24 16:17:37 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.03ms)
2025-11-24 16:46:32 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 16:46:32 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'dec5d2b02418.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '214', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': 'dec5d2b02418.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 16:46:32 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-24 16:46:32 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-24 16:46:32 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-24 16:46:32 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (3.58ms)
2025-11-24 16:46:32 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 16:46:32 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'dec5d2b02418.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': 'dec5d2b02418.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 16:46:32 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-24 16:46:32 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-24 16:46:32 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (3.09ms)
2025-11-24 16:46:32 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 16:46:32 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'dec5d2b02418.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '214', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': 'dec5d2b02418.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 16:46:32 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-24 16:46:32 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-24 16:46:32 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-24 16:46:32 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.22ms)
2025-11-24 16:46:33 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 16:46:33 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'dec5d2b02418.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': 'dec5d2b02418.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 16:46:33 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-24 16:46:33 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-24 16:46:33 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.36ms)
2025-11-24 16:46:33 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 16:46:33 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'dec5d2b02418.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '51', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': 'dec5d2b02418.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 16:46:33 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: tools/list, ID: 1
2025-11-24 16:46:33 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (1.23ms)
2025-11-24 16:46:38 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 16:46:38 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'dec5d2b02418.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '214', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': 'dec5d2b02418.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 16:46:38 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-24 16:46:38 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-24 16:46:38 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-24 16:46:38 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (1.87ms)
2025-11-24 16:46:38 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 16:46:38 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'dec5d2b02418.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': 'dec5d2b02418.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 16:46:38 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-24 16:46:38 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-24 16:46:38 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.62ms)
2025-11-24 16:46:38 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 16:46:38 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'dec5d2b02418.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '214', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': 'dec5d2b02418.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 16:46:38 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-24 16:46:38 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-24 16:46:38 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-24 16:46:38 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.03ms)
2025-11-24 16:46:38 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 16:46:38 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'dec5d2b02418.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': 'dec5d2b02418.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 16:46:38 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-24 16:46:38 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-24 16:46:38 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (1.60ms)
2025-11-24 16:46:38 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-24 16:46:38 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'dec5d2b02418.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '51', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': 'dec5d2b02418.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-24 16:46:38 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: tools/list, ID: 1
2025-11-24 16:46:38 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (1.65ms)
2025-11-25 12:44:26 | INFO     | logger.py:76 | ‚úÖ Logger initialized: mcp_server
2025-11-25 12:44:26 | DEBUG    | logger.py:77 | Log file: /Users/pond500/RAG/mcp_rag-main/logs/server.log
2025-11-25 12:44:27 | INFO     | mcp_server_multi_kb.py:38 | üöÄ Starting Multi-KB MCP Server...
2025-11-25 12:44:27 | INFO     | multi_kb_rag.py:45 | üöÄ Initializing Multi-Knowledge Base RAG System...
2025-11-25 12:44:27 | DEBUG    | multi_kb_rag.py:52 | Qdrant client: localhost:6333
2025-11-25 12:44:36 | INFO     | multi_kb_rag.py:82 | ‚úÖ Multi-KB RAG System initialized
2025-11-25 12:44:36 | INFO     | mcp_server_multi_kb.py:43 | ‚úÖ Multi-KB MCP Server ready
2025-11-25 12:46:00 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 12:46:00 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '47aade9ea8bf.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '169', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=39b71b0b8d9c49abacf73b1bf772eafe,sentry-sample_rate=0.0,sentry-sampled=false,sentry-sample_rand=0.756829', 'content-type': 'application/json', 'sentry-trace': '39b71b0b8d9c49abacf73b1bf772eafe-919b472d64ffd0fa-0', 'traceparent': '00-3a223e33dd9929e4edd0bf4d83601272-6e3e35e8ad11c574-00', 'x-b3-sampled': '0', 'x-b3-spanid': '6e3e35e8ad11c574', 'x-b3-traceid': '3a223e33dd9929e4edd0bf4d83601272', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '47aade9ea8bf.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 12:46:00 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-25 12:46:00 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-25 12:46:00 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-25 12:46:00 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.16ms)
2025-11-25 12:46:00 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 12:46:00 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '47aade9ea8bf.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=39b71b0b8d9c49abacf73b1bf772eafe,sentry-sample_rate=0.0,sentry-sampled=false,sentry-sample_rand=0.756829', 'content-type': 'application/json', 'sentry-trace': '39b71b0b8d9c49abacf73b1bf772eafe-9829f488b13aa750-0', 'traceparent': '00-cebfed5f32372e462a1f50a13d5e8fe5-caccdb282677a2bf-00', 'x-b3-sampled': '0', 'x-b3-spanid': 'caccdb282677a2bf', 'x-b3-traceid': 'cebfed5f32372e462a1f50a13d5e8fe5', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '47aade9ea8bf.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 12:46:00 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-25 12:46:00 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-25 12:46:00 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (1.90ms)
2025-11-25 12:46:01 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 12:46:01 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '47aade9ea8bf.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '169', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=39b71b0b8d9c49abacf73b1bf772eafe,sentry-sample_rate=0.0,sentry-sampled=false,sentry-sample_rand=0.756829', 'content-type': 'application/json', 'sentry-trace': '39b71b0b8d9c49abacf73b1bf772eafe-b42537897b3e77ef-0', 'traceparent': '00-cca2a553272f7da3ee6989296d497e3f-94d68492ed30b60a-00', 'x-b3-sampled': '0', 'x-b3-spanid': '94d68492ed30b60a', 'x-b3-traceid': 'cca2a553272f7da3ee6989296d497e3f', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '47aade9ea8bf.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 12:46:01 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-25 12:46:01 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-25 12:46:01 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-25 12:46:01 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.65ms)
2025-11-25 12:46:01 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 12:46:01 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '47aade9ea8bf.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=39b71b0b8d9c49abacf73b1bf772eafe,sentry-sample_rate=0.0,sentry-sampled=false,sentry-sample_rand=0.756829', 'content-type': 'application/json', 'sentry-trace': '39b71b0b8d9c49abacf73b1bf772eafe-b9b5790c3edd073d-0', 'traceparent': '00-cdca70c22e3fb206e6e1a8e12142bd05-7a59b47281bdc881-00', 'x-b3-sampled': '0', 'x-b3-spanid': '7a59b47281bdc881', 'x-b3-traceid': 'cdca70c22e3fb206e6e1a8e12142bd05', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '47aade9ea8bf.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 12:46:01 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-25 12:46:01 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-25 12:46:01 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.18ms)
2025-11-25 12:46:02 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 12:46:02 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '47aade9ea8bf.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '51', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=39b71b0b8d9c49abacf73b1bf772eafe,sentry-sample_rate=0.0,sentry-sampled=false,sentry-sample_rand=0.756829', 'content-type': 'application/json', 'sentry-trace': '39b71b0b8d9c49abacf73b1bf772eafe-b101ea50a43f7729-0', 'traceparent': '00-7901532c56bc72eafd4db73c1a4fe211-f4b3821ee8e6f6dd-00', 'x-b3-sampled': '0', 'x-b3-spanid': 'f4b3821ee8e6f6dd', 'x-b3-traceid': '7901532c56bc72eafd4db73c1a4fe211', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '47aade9ea8bf.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 12:46:02 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: tools/list, ID: 1
2025-11-25 12:46:02 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.09ms)
2025-11-25 12:47:48 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 12:47:48 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '47aade9ea8bf.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '169', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=b9b9bc0c6d524770915c4f65a979526a,sentry-sample_rate=0.0,sentry-sampled=false,sentry-sample_rand=0.655458', 'content-type': 'application/json', 'sentry-trace': '343e406fa3d44af988f41e3dac35430e-8e78cf3ffb83a27e-0', 'traceparent': '00-2a39ec7e57a9bbe902d008c7b0494154-813543eaa2abdace-01', 'x-b3-sampled': '1', 'x-b3-spanid': '813543eaa2abdace', 'x-b3-traceid': '2a39ec7e57a9bbe902d008c7b0494154', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '47aade9ea8bf.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 12:47:48 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-25 12:47:48 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-25 12:47:48 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-25 12:47:48 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (3.58ms)
2025-11-25 12:47:49 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 12:47:49 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '47aade9ea8bf.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=b9b9bc0c6d524770915c4f65a979526a,sentry-sample_rate=0.0,sentry-sampled=false,sentry-sample_rand=0.655458', 'content-type': 'application/json', 'sentry-trace': '343e406fa3d44af988f41e3dac35430e-a30620ac2ebc8710-0', 'traceparent': '00-981c45ebd6dc5e22af578595842e221a-0b2704f3944d8126-00', 'x-b3-sampled': '0', 'x-b3-spanid': '0b2704f3944d8126', 'x-b3-traceid': '981c45ebd6dc5e22af578595842e221a', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '47aade9ea8bf.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 12:47:49 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-25 12:47:49 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-25 12:47:49 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.15ms)
2025-11-25 12:47:49 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 12:47:49 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '47aade9ea8bf.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '108', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=b9b9bc0c6d524770915c4f65a979526a,sentry-sample_rate=0.0,sentry-sampled=false,sentry-sample_rand=0.655458', 'content-type': 'application/json', 'sentry-trace': '343e406fa3d44af988f41e3dac35430e-9c43c7dbbb32afa9-0', 'traceparent': '00-f445cfcd9194ce9872ee7b817c59a2a0-70ad8c0a0ed06130-00', 'x-b3-sampled': '0', 'x-b3-spanid': '70ad8c0a0ed06130', 'x-b3-traceid': 'f445cfcd9194ce9872ee7b817c59a2a0', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '47aade9ea8bf.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 12:47:49 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: tools/call, ID: 1
2025-11-25 12:47:49 | INFO     | mcp_server_multi_kb.py:364 | üîß Tool call: list_collections
2025-11-25 12:47:49 | DEBUG    | mcp_server_multi_kb.py:365 | Arguments: {}
2025-11-25 12:47:49 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (38.90ms)
2025-11-25 13:30:56 | INFO     | logger.py:76 | ‚úÖ Logger initialized: mcp_server
2025-11-25 13:30:56 | DEBUG    | logger.py:77 | Log file: /Users/pond500/RAG/mcp_rag-main/logs/server.log
2025-11-25 13:30:57 | INFO     | mcp_server_multi_kb.py:38 | üöÄ Starting Multi-KB MCP Server...
2025-11-25 13:30:57 | INFO     | multi_kb_rag.py:45 | üöÄ Initializing Multi-Knowledge Base RAG System...
2025-11-25 13:30:57 | DEBUG    | multi_kb_rag.py:52 | Qdrant client: localhost:6333
2025-11-25 13:31:09 | INFO     | multi_kb_rag.py:82 | ‚úÖ Multi-KB RAG System initialized
2025-11-25 13:31:09 | INFO     | mcp_server_multi_kb.py:43 | ‚úÖ Multi-KB MCP Server ready
2025-11-25 13:31:59 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 13:31:59 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '6cfa4cf4c59b.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '169', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=c1186112a45f4c1d8d1f6662073da98d,sentry-sample_rate=0.5,sentry-sampled=true,sentry-sample_rand=0.005841', 'content-type': 'application/json', 'sentry-trace': '47814a1ad2184a7e99ab792cbb5f320d-9463448ef8386499-1', 'traceparent': '00-e19bbb84a85c174b86182eb7d80d9a19-09d2a91b6fe46780-00', 'x-b3-sampled': '0', 'x-b3-spanid': '09d2a91b6fe46780', 'x-b3-traceid': 'e19bbb84a85c174b86182eb7d80d9a19', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '6cfa4cf4c59b.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 13:31:59 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-25 13:31:59 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-25 13:31:59 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-25 13:31:59 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (1.99ms)
2025-11-25 13:31:59 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 13:31:59 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '6cfa4cf4c59b.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=c1186112a45f4c1d8d1f6662073da98d,sentry-sample_rate=0.5,sentry-sampled=true,sentry-sample_rand=0.005841', 'content-type': 'application/json', 'sentry-trace': '47814a1ad2184a7e99ab792cbb5f320d-a29737028ac54bf5-1', 'traceparent': '00-8d9dbaa387206cb199158faf89292774-89b2377358dfaa2c-00', 'x-b3-sampled': '0', 'x-b3-spanid': '89b2377358dfaa2c', 'x-b3-traceid': '8d9dbaa387206cb199158faf89292774', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '6cfa4cf4c59b.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 13:31:59 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-25 13:31:59 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-25 13:31:59 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.55ms)
2025-11-25 13:31:59 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 13:31:59 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '6cfa4cf4c59b.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '51', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=c1186112a45f4c1d8d1f6662073da98d,sentry-sample_rate=0.5,sentry-sampled=true,sentry-sample_rand=0.005841', 'content-type': 'application/json', 'sentry-trace': '47814a1ad2184a7e99ab792cbb5f320d-88de9e6a7b1d0e28-1', 'traceparent': '00-d2f2c205005b9c46003a25916cee96e5-ddd16d795870bb29-01', 'x-b3-sampled': '1', 'x-b3-spanid': 'ddd16d795870bb29', 'x-b3-traceid': 'd2f2c205005b9c46003a25916cee96e5', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '6cfa4cf4c59b.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 13:31:59 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: tools/list, ID: 1
2025-11-25 13:31:59 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.46ms)
2025-11-25 13:32:00 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 13:32:00 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '6cfa4cf4c59b.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '169', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=c1186112a45f4c1d8d1f6662073da98d,sentry-sample_rate=0.25,sentry-sampled=true,sentry-sample_rand=0.005841', 'content-type': 'application/json', 'sentry-trace': '47814a1ad2184a7e99ab792cbb5f320d-ba360e58f3d71693-1', 'traceparent': '00-ec6b10ebe3109eb609c11b4afa5841ee-b86e4e80c0fc68c6-01', 'x-b3-sampled': '1', 'x-b3-spanid': 'b86e4e80c0fc68c6', 'x-b3-traceid': 'ec6b10ebe3109eb609c11b4afa5841ee', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '6cfa4cf4c59b.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 13:32:00 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-25 13:32:00 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-25 13:32:00 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-25 13:32:00 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.51ms)
2025-11-25 13:32:01 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 13:32:01 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '6cfa4cf4c59b.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=c1186112a45f4c1d8d1f6662073da98d,sentry-sample_rate=0.25,sentry-sampled=true,sentry-sample_rand=0.005841', 'content-type': 'application/json', 'sentry-trace': '47814a1ad2184a7e99ab792cbb5f320d-93f511b91b5785b1-1', 'traceparent': '00-18606473b6ecc5e68159c010771a3002-d0d44887027f7391-00', 'x-b3-sampled': '0', 'x-b3-spanid': 'd0d44887027f7391', 'x-b3-traceid': '18606473b6ecc5e68159c010771a3002', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '6cfa4cf4c59b.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 13:32:01 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-25 13:32:01 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-25 13:32:01 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.71ms)
2025-11-25 13:32:01 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 13:32:01 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '6cfa4cf4c59b.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '169', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=c1186112a45f4c1d8d1f6662073da98d,sentry-sample_rate=0.25,sentry-sampled=true,sentry-sample_rand=0.005841', 'content-type': 'application/json', 'sentry-trace': '47814a1ad2184a7e99ab792cbb5f320d-8ae78e38616453c5-1', 'traceparent': '00-385504995ab4acd456dd6cdb799853d2-4ead265e7473b8e1-00', 'x-b3-sampled': '0', 'x-b3-spanid': '4ead265e7473b8e1', 'x-b3-traceid': '385504995ab4acd456dd6cdb799853d2', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '6cfa4cf4c59b.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 13:32:01 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-25 13:32:01 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-25 13:32:01 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-25 13:32:01 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (3.05ms)
2025-11-25 13:32:02 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 13:32:02 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '6cfa4cf4c59b.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=c1186112a45f4c1d8d1f6662073da98d,sentry-sample_rate=0.25,sentry-sampled=true,sentry-sample_rand=0.005841', 'content-type': 'application/json', 'sentry-trace': '47814a1ad2184a7e99ab792cbb5f320d-a74e05dbd91680fd-1', 'traceparent': '00-2c9aee06233c955577ce2d1a8db665ed-acda29b53afb351f-00', 'x-b3-sampled': '0', 'x-b3-spanid': 'acda29b53afb351f', 'x-b3-traceid': '2c9aee06233c955577ce2d1a8db665ed', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '6cfa4cf4c59b.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 13:32:02 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-25 13:32:02 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-25 13:32:02 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.65ms)
2025-11-25 13:32:02 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 13:32:02 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '6cfa4cf4c59b.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '51', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=c1186112a45f4c1d8d1f6662073da98d,sentry-sample_rate=0.25,sentry-sampled=true,sentry-sample_rand=0.005841', 'content-type': 'application/json', 'sentry-trace': '47814a1ad2184a7e99ab792cbb5f320d-a8c4288cc7c45496-1', 'traceparent': '00-5972d62a218a939515de9bb444cbc577-e2a15ae571d45e85-01', 'x-b3-sampled': '1', 'x-b3-spanid': 'e2a15ae571d45e85', 'x-b3-traceid': '5972d62a218a939515de9bb444cbc577', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '6cfa4cf4c59b.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 13:32:02 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: tools/list, ID: 1
2025-11-25 13:32:02 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.67ms)
2025-11-25 14:04:09 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 14:04:09 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '6cfa4cf4c59b.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '169', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=8557612d51e34e45b8185cc72fb4c0c0,sentry-sample_rate=1.0,sentry-sampled=true,sentry-sample_rand=0.080368', 'content-type': 'application/json', 'sentry-trace': '53f7047f45c240f8a8e4e074d768a7e5-a8ece705cc42fa2f-1', 'traceparent': '00-4bce91d6027ca5e40ea7658c32d12939-ac90a96ca7523e66-01', 'x-b3-sampled': '1', 'x-b3-spanid': 'ac90a96ca7523e66', 'x-b3-traceid': '4bce91d6027ca5e40ea7658c32d12939', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '6cfa4cf4c59b.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 14:04:09 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-25 14:04:09 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-25 14:04:09 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-25 14:04:09 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (4.01ms)
2025-11-25 14:04:10 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 14:04:10 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '6cfa4cf4c59b.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=8557612d51e34e45b8185cc72fb4c0c0,sentry-sample_rate=1.0,sentry-sampled=true,sentry-sample_rand=0.080368', 'content-type': 'application/json', 'sentry-trace': '53f7047f45c240f8a8e4e074d768a7e5-8103c1705870a7b1-1', 'traceparent': '00-74823b2834d44231167472c0cdcd4505-4591cf38abece465-01', 'x-b3-sampled': '1', 'x-b3-spanid': '4591cf38abece465', 'x-b3-traceid': '74823b2834d44231167472c0cdcd4505', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '6cfa4cf4c59b.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 14:04:10 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-25 14:04:10 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-25 14:04:10 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.41ms)
2025-11-25 14:04:10 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 14:04:10 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '6cfa4cf4c59b.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '108', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=8557612d51e34e45b8185cc72fb4c0c0,sentry-sample_rate=1.0,sentry-sampled=true,sentry-sample_rand=0.080368', 'content-type': 'application/json', 'sentry-trace': '53f7047f45c240f8a8e4e074d768a7e5-bc3d30ceca9721e1-1', 'traceparent': '00-e08726a8ccaadcca4a8d237737bf7a1d-68c51d4ad0f407a8-00', 'x-b3-sampled': '0', 'x-b3-spanid': '68c51d4ad0f407a8', 'x-b3-traceid': 'e08726a8ccaadcca4a8d237737bf7a1d', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '6cfa4cf4c59b.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 14:04:10 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: tools/call, ID: 1
2025-11-25 14:04:10 | INFO     | mcp_server_multi_kb.py:364 | üîß Tool call: list_collections
2025-11-25 14:04:10 | DEBUG    | mcp_server_multi_kb.py:365 | Arguments: {}
2025-11-25 14:04:10 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (30.61ms)
2025-11-25 14:05:18 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 14:05:18 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '6cfa4cf4c59b.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '169', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=8557612d51e34e45b8185cc72fb4c0c0,sentry-sample_rate=1.0,sentry-sampled=true,sentry-sample_rand=0.080368', 'content-type': 'application/json', 'sentry-trace': '53f7047f45c240f8a8e4e074d768a7e5-a1626cf9ae19a5ba-1', 'traceparent': '00-d1a944661d63ebf6c72b9ccb5a83b439-ca81727c25c1d0c0-00', 'x-b3-sampled': '0', 'x-b3-spanid': 'ca81727c25c1d0c0', 'x-b3-traceid': 'd1a944661d63ebf6c72b9ccb5a83b439', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '6cfa4cf4c59b.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 14:05:18 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-25 14:05:18 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-25 14:05:18 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-25 14:05:18 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.96ms)
2025-11-25 14:05:18 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 14:05:18 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '6cfa4cf4c59b.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=8557612d51e34e45b8185cc72fb4c0c0,sentry-sample_rate=1.0,sentry-sampled=true,sentry-sample_rand=0.080368', 'content-type': 'application/json', 'sentry-trace': '53f7047f45c240f8a8e4e074d768a7e5-9e1b009454b0ef84-1', 'traceparent': '00-1849de04cd52bfd3d98b2a348a8f95ba-2a4b638ee8470ec4-00', 'x-b3-sampled': '0', 'x-b3-spanid': '2a4b638ee8470ec4', 'x-b3-traceid': '1849de04cd52bfd3d98b2a348a8f95ba', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '6cfa4cf4c59b.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 14:05:18 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-25 14:05:18 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-25 14:05:18 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.63ms)
2025-11-25 14:05:19 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 14:05:19 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '6cfa4cf4c59b.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '127', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=8557612d51e34e45b8185cc72fb4c0c0,sentry-sample_rate=1.0,sentry-sampled=true,sentry-sample_rand=0.080368', 'content-type': 'application/json', 'sentry-trace': '53f7047f45c240f8a8e4e074d768a7e5-b09a7550ca844744-1', 'traceparent': '00-8caceeb2a229cb88029945c9da0bbea9-976583cee5b09c9e-01', 'x-b3-sampled': '1', 'x-b3-spanid': '976583cee5b09c9e', 'x-b3-traceid': '8caceeb2a229cb88029945c9da0bbea9', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '6cfa4cf4c59b.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 14:05:19 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: tools/call, ID: 1
2025-11-25 14:05:19 | INFO     | mcp_server_multi_kb.py:364 | üîß Tool call: create_collection
2025-11-25 14:05:19 | DEBUG    | mcp_server_multi_kb.py:365 | Arguments: {'kb_name': 'P_toh'}
2025-11-25 14:05:19 | DEBUG    | multi_kb_rag.py:116 | Skipping router update for P_toh (no meaningful description)
2025-11-25 14:05:19 | INFO     | multi_kb_rag.py:204 | ‚úÖ Created collection: kb_p_toh
2025-11-25 14:05:19 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (153.34ms)
2025-11-25 14:05:59 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 14:05:59 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '6cfa4cf4c59b.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '169', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=8557612d51e34e45b8185cc72fb4c0c0,sentry-sample_rate=1.0,sentry-sampled=true,sentry-sample_rand=0.080368', 'content-type': 'application/json', 'sentry-trace': '53f7047f45c240f8a8e4e074d768a7e5-b557686e2119a5a6-1', 'traceparent': '00-651c8a0e3adc03305b241a6e28b87034-571b0c7b3a9f0e3b-00', 'x-b3-sampled': '0', 'x-b3-spanid': '571b0c7b3a9f0e3b', 'x-b3-traceid': '651c8a0e3adc03305b241a6e28b87034', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '6cfa4cf4c59b.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 14:05:59 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-25 14:05:59 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-25 14:05:59 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-25 14:05:59 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (3.68ms)
2025-11-25 14:05:59 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 14:05:59 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '6cfa4cf4c59b.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=8557612d51e34e45b8185cc72fb4c0c0,sentry-sample_rate=1.0,sentry-sampled=true,sentry-sample_rand=0.080368', 'content-type': 'application/json', 'sentry-trace': '53f7047f45c240f8a8e4e074d768a7e5-b740f01596baacd9-1', 'traceparent': '00-3f603a3dc79653525e2daf8bcb10743e-d11aaeca03618f0c-00', 'x-b3-sampled': '0', 'x-b3-spanid': 'd11aaeca03618f0c', 'x-b3-traceid': '3f603a3dc79653525e2daf8bcb10743e', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '6cfa4cf4c59b.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 14:05:59 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-25 14:05:59 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-25 14:05:59 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.25ms)
2025-11-25 14:05:59 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 14:05:59 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '6cfa4cf4c59b.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '108', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=8557612d51e34e45b8185cc72fb4c0c0,sentry-sample_rate=1.0,sentry-sampled=true,sentry-sample_rand=0.080368', 'content-type': 'application/json', 'sentry-trace': '53f7047f45c240f8a8e4e074d768a7e5-83fab3129dd0b1aa-1', 'traceparent': '00-34936967e509f4faf914b28bdfa83e1f-e49383dffcca06ac-00', 'x-b3-sampled': '0', 'x-b3-spanid': 'e49383dffcca06ac', 'x-b3-traceid': '34936967e509f4faf914b28bdfa83e1f', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '6cfa4cf4c59b.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 14:05:59 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: tools/call, ID: 1
2025-11-25 14:05:59 | INFO     | mcp_server_multi_kb.py:364 | üîß Tool call: list_collections
2025-11-25 14:05:59 | DEBUG    | mcp_server_multi_kb.py:365 | Arguments: {}
2025-11-25 14:05:59 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (34.40ms)
2025-11-25 14:06:06 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 14:06:06 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '6cfa4cf4c59b.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '169', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=8557612d51e34e45b8185cc72fb4c0c0,sentry-sample_rate=1.0,sentry-sampled=true,sentry-sample_rand=0.080368', 'content-type': 'application/json', 'sentry-trace': '53f7047f45c240f8a8e4e074d768a7e5-af18f761ded313b3-1', 'traceparent': '00-c0e4dbe441b15df9e1b574e92ab4dea7-69311c57c4bef729-00', 'x-b3-sampled': '0', 'x-b3-spanid': '69311c57c4bef729', 'x-b3-traceid': 'c0e4dbe441b15df9e1b574e92ab4dea7', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '6cfa4cf4c59b.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 14:06:06 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-25 14:06:06 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-25 14:06:06 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-25 14:06:06 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.72ms)
2025-11-25 14:06:06 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 14:06:06 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '6cfa4cf4c59b.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=8557612d51e34e45b8185cc72fb4c0c0,sentry-sample_rate=1.0,sentry-sampled=true,sentry-sample_rand=0.080368', 'content-type': 'application/json', 'sentry-trace': '53f7047f45c240f8a8e4e074d768a7e5-b235d1ae202cde9b-1', 'traceparent': '00-8b5da019e677cb66b049218eb591f56f-c04da96ba3ad2686-00', 'x-b3-sampled': '0', 'x-b3-spanid': 'c04da96ba3ad2686', 'x-b3-traceid': '8b5da019e677cb66b049218eb591f56f', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '6cfa4cf4c59b.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 14:06:06 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-25 14:06:06 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-25 14:06:06 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.00ms)
2025-11-25 14:06:07 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 14:06:07 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '6cfa4cf4c59b.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '108', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=8557612d51e34e45b8185cc72fb4c0c0,sentry-sample_rate=1.0,sentry-sampled=true,sentry-sample_rand=0.080368', 'content-type': 'application/json', 'sentry-trace': '53f7047f45c240f8a8e4e074d768a7e5-b5207528df97769e-1', 'traceparent': '00-0a80bb8372eb9334ad3c41d34b205a19-f2763849bb6d9f83-00', 'x-b3-sampled': '0', 'x-b3-spanid': 'f2763849bb6d9f83', 'x-b3-traceid': '0a80bb8372eb9334ad3c41d34b205a19', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '6cfa4cf4c59b.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 14:06:07 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: tools/call, ID: 1
2025-11-25 14:06:07 | INFO     | mcp_server_multi_kb.py:364 | üîß Tool call: list_collections
2025-11-25 14:06:07 | DEBUG    | mcp_server_multi_kb.py:365 | Arguments: {}
2025-11-25 14:06:07 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (34.50ms)
2025-11-25 14:06:42 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 14:06:42 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '6cfa4cf4c59b.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '169', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=8557612d51e34e45b8185cc72fb4c0c0,sentry-sample_rate=1.0,sentry-sampled=true,sentry-sample_rand=0.080368', 'content-type': 'application/json', 'sentry-trace': '53f7047f45c240f8a8e4e074d768a7e5-a92953cce6b1fcc1-1', 'traceparent': '00-d6611e34ec6400af4404c3718fbe74e4-4fe2ce2f79945766-00', 'x-b3-sampled': '0', 'x-b3-spanid': '4fe2ce2f79945766', 'x-b3-traceid': 'd6611e34ec6400af4404c3718fbe74e4', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '6cfa4cf4c59b.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 14:06:42 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-25 14:06:42 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-25 14:06:42 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-25 14:06:42 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (3.72ms)
2025-11-25 14:06:42 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 14:06:42 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '6cfa4cf4c59b.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=8557612d51e34e45b8185cc72fb4c0c0,sentry-sample_rate=1.0,sentry-sampled=true,sentry-sample_rand=0.080368', 'content-type': 'application/json', 'sentry-trace': '53f7047f45c240f8a8e4e074d768a7e5-87c9436463165cac-1', 'traceparent': '00-a630ffdd707a2e74498fc4baec3e2f97-c6fa0b0fe9fbd96e-00', 'x-b3-sampled': '0', 'x-b3-spanid': 'c6fa0b0fe9fbd96e', 'x-b3-traceid': 'a630ffdd707a2e74498fc4baec3e2f97', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '6cfa4cf4c59b.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 14:06:42 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-25 14:06:42 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-25 14:06:42 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (1.88ms)
2025-11-25 14:06:43 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 14:06:43 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '6cfa4cf4c59b.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '137', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=8557612d51e34e45b8185cc72fb4c0c0,sentry-sample_rate=1.0,sentry-sampled=true,sentry-sample_rand=0.080368', 'content-type': 'application/json', 'sentry-trace': '53f7047f45c240f8a8e4e074d768a7e5-a99974fa0b7b9a76-1', 'traceparent': '00-539182c17d2e809c2efff9168edeec06-f644d7aa5fbfe45d-00', 'x-b3-sampled': '0', 'x-b3-spanid': 'f644d7aa5fbfe45d', 'x-b3-traceid': '539182c17d2e809c2efff9168edeec06', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '6cfa4cf4c59b.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 14:06:43 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: tools/call, ID: 1
2025-11-25 14:06:43 | INFO     | mcp_server_multi_kb.py:364 | üîß Tool call: get_collection_info
2025-11-25 14:06:43 | DEBUG    | mcp_server_multi_kb.py:365 | Arguments: {'kb_name': 'kb_gun_law_v2'}
2025-11-25 14:06:43 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (22.22ms)
2025-11-25 14:07:42 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 14:07:42 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '6cfa4cf4c59b.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '169', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=8557612d51e34e45b8185cc72fb4c0c0,sentry-sample_rate=1.0,sentry-sampled=true,sentry-sample_rand=0.080368', 'content-type': 'application/json', 'sentry-trace': '53f7047f45c240f8a8e4e074d768a7e5-9804d185f6327b6a-1', 'traceparent': '00-eee7c0f6c7a6a3bc7796ab0b2c248945-5260cc841ec87f7f-00', 'x-b3-sampled': '0', 'x-b3-spanid': '5260cc841ec87f7f', 'x-b3-traceid': 'eee7c0f6c7a6a3bc7796ab0b2c248945', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '6cfa4cf4c59b.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 14:07:42 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-25 14:07:42 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-25 14:07:42 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-25 14:07:42 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (3.48ms)
2025-11-25 14:07:42 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 14:07:42 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '6cfa4cf4c59b.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=8557612d51e34e45b8185cc72fb4c0c0,sentry-sample_rate=1.0,sentry-sampled=true,sentry-sample_rand=0.080368', 'content-type': 'application/json', 'sentry-trace': '53f7047f45c240f8a8e4e074d768a7e5-86c1876f3e6966b7-1', 'traceparent': '00-b889c6636822f38d98c3414106987fd3-512208790a4bb7ca-00', 'x-b3-sampled': '0', 'x-b3-spanid': '512208790a4bb7ca', 'x-b3-traceid': 'b889c6636822f38d98c3414106987fd3', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '6cfa4cf4c59b.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 14:07:42 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-25 14:07:42 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-25 14:07:42 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.33ms)
2025-11-25 14:07:43 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 14:07:43 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '6cfa4cf4c59b.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '127', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=8557612d51e34e45b8185cc72fb4c0c0,sentry-sample_rate=1.0,sentry-sampled=true,sentry-sample_rand=0.080368', 'content-type': 'application/json', 'sentry-trace': '53f7047f45c240f8a8e4e074d768a7e5-a1aeff0437355655-1', 'traceparent': '00-e45c1ffacde47396f03d0b10bafff4ca-abe255ca6fae0ad6-00', 'x-b3-sampled': '0', 'x-b3-spanid': 'abe255ca6fae0ad6', 'x-b3-traceid': 'e45c1ffacde47396f03d0b10bafff4ca', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '6cfa4cf4c59b.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 14:07:43 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: tools/call, ID: 1
2025-11-25 14:07:43 | INFO     | mcp_server_multi_kb.py:364 | üîß Tool call: delete_collection
2025-11-25 14:07:43 | DEBUG    | mcp_server_multi_kb.py:365 | Arguments: {'kb_name': 'p_toh'}
2025-11-25 14:07:43 | INFO     | multi_kb_rag.py:331 | ‚úÖ Deleted collection: kb_p_toh
2025-11-25 14:07:43 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (38.65ms)
2025-11-25 14:07:46 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 14:07:46 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '6cfa4cf4c59b.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '169', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=8557612d51e34e45b8185cc72fb4c0c0,sentry-sample_rate=1.0,sentry-sampled=true,sentry-sample_rand=0.080368', 'content-type': 'application/json', 'sentry-trace': '53f7047f45c240f8a8e4e074d768a7e5-9a7230f2fd3fbd07-1', 'traceparent': '00-1268a77f7ca8cc7a62bf78f1f4b2338c-12de5e862bdf05c6-00', 'x-b3-sampled': '0', 'x-b3-spanid': '12de5e862bdf05c6', 'x-b3-traceid': '1268a77f7ca8cc7a62bf78f1f4b2338c', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '6cfa4cf4c59b.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 14:07:46 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-25 14:07:46 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-25 14:07:46 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-25 14:07:46 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.93ms)
2025-11-25 14:07:46 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 14:07:46 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '6cfa4cf4c59b.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=8557612d51e34e45b8185cc72fb4c0c0,sentry-sample_rate=1.0,sentry-sampled=true,sentry-sample_rand=0.080368', 'content-type': 'application/json', 'sentry-trace': '53f7047f45c240f8a8e4e074d768a7e5-ad1ed1b36fce280e-1', 'traceparent': '00-37a869e48bdbf2c3d6c7a4b5168479d4-24c240e9e4e726af-00', 'x-b3-sampled': '0', 'x-b3-spanid': '24c240e9e4e726af', 'x-b3-traceid': '37a869e48bdbf2c3d6c7a4b5168479d4', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '6cfa4cf4c59b.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 14:07:46 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-25 14:07:46 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-25 14:07:46 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.35ms)
2025-11-25 14:07:47 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 14:07:47 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '6cfa4cf4c59b.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '108', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'baggage': 'sentry-environment=production,sentry-public_key=c0bcc0e36783694f41e4fb1e6a3efea9,sentry-trace_id=8557612d51e34e45b8185cc72fb4c0c0,sentry-sample_rate=1.0,sentry-sampled=true,sentry-sample_rand=0.080368', 'content-type': 'application/json', 'sentry-trace': '53f7047f45c240f8a8e4e074d768a7e5-984161de27bfb40f-1', 'traceparent': '00-4943351f75dad6140097b23c261452bb-d01667624da72243-01', 'x-b3-sampled': '1', 'x-b3-spanid': 'd01667624da72243', 'x-b3-traceid': '4943351f75dad6140097b23c261452bb', 'x-forwarded-for': '3.214.24.53', 'x-forwarded-host': '6cfa4cf4c59b.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 14:07:47 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: tools/call, ID: 1
2025-11-25 14:07:47 | INFO     | mcp_server_multi_kb.py:364 | üîß Tool call: list_collections
2025-11-25 14:07:47 | DEBUG    | mcp_server_multi_kb.py:365 | Arguments: {}
2025-11-25 14:07:47 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (19.75ms)
2025-11-25 14:16:56 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 14:16:56 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '6cfa4cf4c59b.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '214', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '6cfa4cf4c59b.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 14:16:56 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-25 14:16:56 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-25 14:16:56 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-25 14:16:56 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (8.80ms)
2025-11-25 14:16:56 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 14:16:56 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '6cfa4cf4c59b.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '6cfa4cf4c59b.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 14:16:56 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-25 14:16:56 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-25 14:16:56 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.18ms)
2025-11-25 14:16:56 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 14:16:56 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '6cfa4cf4c59b.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '214', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '6cfa4cf4c59b.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 14:16:56 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-25 14:16:56 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-25 14:16:56 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-25 14:16:56 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.57ms)
2025-11-25 14:16:56 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 14:16:56 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '6cfa4cf4c59b.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '6cfa4cf4c59b.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 14:16:56 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-25 14:16:56 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-25 14:16:56 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.27ms)
2025-11-25 14:16:57 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 14:16:57 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '6cfa4cf4c59b.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '51', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '6cfa4cf4c59b.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 14:16:57 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: tools/list, ID: 1
2025-11-25 14:16:57 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.00ms)
2025-11-25 14:17:47 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 14:17:47 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '6cfa4cf4c59b.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '214', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '6cfa4cf4c59b.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 14:17:47 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-25 14:17:47 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-25 14:17:47 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-25 14:17:47 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (1.88ms)
2025-11-25 14:17:47 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 14:17:47 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '6cfa4cf4c59b.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '6cfa4cf4c59b.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 14:17:47 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-25 14:17:47 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-25 14:17:47 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.07ms)
2025-11-25 14:17:47 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 14:17:47 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '6cfa4cf4c59b.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '51', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '6cfa4cf4c59b.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 14:17:47 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: tools/list, ID: 1
2025-11-25 14:17:47 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (1.12ms)
2025-11-25 14:19:08 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 14:19:08 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '6cfa4cf4c59b.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '214', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '6cfa4cf4c59b.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 14:19:08 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-25 14:19:08 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-25 14:19:08 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-25 14:19:08 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.83ms)
2025-11-25 14:19:08 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 14:19:08 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '6cfa4cf4c59b.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '6cfa4cf4c59b.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 14:19:08 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-25 14:19:08 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-25 14:19:08 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.48ms)
2025-11-25 14:19:08 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 14:19:08 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '6cfa4cf4c59b.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '214', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '6cfa4cf4c59b.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 14:19:08 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-25 14:19:08 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-25 14:19:08 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-25 14:19:08 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (16.03ms)
2025-11-25 14:19:09 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 14:19:09 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '6cfa4cf4c59b.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '6cfa4cf4c59b.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 14:19:09 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-25 14:19:09 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-25 14:19:09 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.33ms)
2025-11-25 14:19:09 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 14:19:09 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '6cfa4cf4c59b.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '51', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '6cfa4cf4c59b.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 14:19:09 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: tools/list, ID: 1
2025-11-25 14:19:09 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.52ms)
2025-11-25 14:41:45 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 14:41:45 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '6cfa4cf4c59b.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '214', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '6cfa4cf4c59b.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 14:41:45 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-25 14:41:45 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-25 14:41:45 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-25 14:41:45 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.95ms)
2025-11-25 14:41:45 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 14:41:45 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '6cfa4cf4c59b.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '6cfa4cf4c59b.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 14:41:45 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-25 14:41:45 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-25 14:41:45 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.20ms)
2025-11-25 14:41:46 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 14:41:46 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '6cfa4cf4c59b.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '214', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '6cfa4cf4c59b.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 14:41:46 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-25 14:41:46 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-25 14:41:46 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-25 14:41:46 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.77ms)
2025-11-25 14:41:46 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 14:41:46 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '6cfa4cf4c59b.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '6cfa4cf4c59b.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 14:41:46 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-25 14:41:46 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-25 14:41:46 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.09ms)
2025-11-25 14:41:46 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 14:41:46 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '6cfa4cf4c59b.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '51', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '6cfa4cf4c59b.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 14:41:46 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: tools/list, ID: 1
2025-11-25 14:41:46 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.30ms)
2025-11-25 14:48:34 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 14:48:34 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '6cfa4cf4c59b.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '214', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '6cfa4cf4c59b.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 14:48:34 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-25 14:48:34 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-25 14:48:34 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-25 14:48:34 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (3.30ms)
2025-11-25 14:48:34 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 14:48:34 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '6cfa4cf4c59b.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '6cfa4cf4c59b.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 14:48:34 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-25 14:48:34 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-25 14:48:34 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.77ms)
2025-11-25 14:48:35 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-25 14:48:35 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': '6cfa4cf4c59b.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '124', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': '6cfa4cf4c59b.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-25 14:48:35 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: tools/call, ID: 1
2025-11-25 14:48:35 | INFO     | mcp_server_multi_kb.py:364 | üîß Tool call: create_collection
2025-11-25 14:48:35 | DEBUG    | mcp_server_multi_kb.py:365 | Arguments: {'kb_name': 'GG'}
2025-11-25 14:48:35 | DEBUG    | multi_kb_rag.py:116 | Skipping router update for GG (no meaningful description)
2025-11-25 14:48:35 | INFO     | multi_kb_rag.py:204 | ‚úÖ Created collection: kb_gg
2025-11-25 14:48:35 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (145.74ms)
2025-11-26 16:04:22 | INFO     | logger.py:76 | ‚úÖ Logger initialized: mcp_server
2025-11-26 16:04:22 | DEBUG    | logger.py:77 | Log file: /Users/pond500/RAG/mcp_rag-main/logs/server.log
2025-11-26 16:04:23 | INFO     | mcp_server_multi_kb.py:38 | üöÄ Starting Multi-KB MCP Server...
2025-11-26 16:04:23 | INFO     | multi_kb_rag.py:45 | üöÄ Initializing Multi-Knowledge Base RAG System...
2025-11-26 16:04:23 | DEBUG    | multi_kb_rag.py:52 | Qdrant client: localhost:6333
2025-11-26 16:04:33 | INFO     | multi_kb_rag.py:82 | ‚úÖ Multi-KB RAG System initialized
2025-11-26 16:04:33 | INFO     | mcp_server_multi_kb.py:43 | ‚úÖ Multi-KB MCP Server ready
2025-11-26 16:16:03 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-26 16:16:03 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'a6d6417ca963.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '214', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': 'a6d6417ca963.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-26 16:16:03 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-26 16:16:03 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-26 16:16:03 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-26 16:16:03 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (3.49ms)
2025-11-26 16:16:04 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-26 16:16:04 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'a6d6417ca963.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': 'a6d6417ca963.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-26 16:16:04 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-26 16:16:04 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-26 16:16:04 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (1.66ms)
2025-11-26 16:16:04 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-26 16:16:04 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'a6d6417ca963.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '214', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': 'a6d6417ca963.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-26 16:16:04 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-26 16:16:04 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-26 16:16:04 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-26 16:16:04 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.57ms)
2025-11-26 16:16:04 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-26 16:16:04 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'a6d6417ca963.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': 'a6d6417ca963.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-26 16:16:04 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-26 16:16:04 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-26 16:16:04 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.66ms)
2025-11-26 16:16:04 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-26 16:16:04 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'a6d6417ca963.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '51', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': 'a6d6417ca963.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-26 16:16:04 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: tools/list, ID: 1
2025-11-26 16:16:04 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.26ms)
2025-11-26 16:24:50 | INFO     | logger.py:76 | ‚úÖ Logger initialized: mcp_server
2025-11-26 16:24:50 | DEBUG    | logger.py:77 | Log file: /Users/pond500/RAG/mcp_rag-main/logs/server.log
2025-11-26 16:24:51 | INFO     | mcp_server_multi_kb.py:38 | üöÄ Starting Multi-KB MCP Server...
2025-11-26 16:24:51 | INFO     | multi_kb_rag.py:45 | üöÄ Initializing Multi-Knowledge Base RAG System...
2025-11-26 16:24:51 | DEBUG    | multi_kb_rag.py:52 | Qdrant client: localhost:6333
2025-11-26 16:25:06 | INFO     | multi_kb_rag.py:82 | ‚úÖ Multi-KB RAG System initialized
2025-11-26 16:25:06 | INFO     | mcp_server_multi_kb.py:43 | ‚úÖ Multi-KB MCP Server ready
2025-11-26 16:25:20 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-26 16:25:20 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'abfcc78cc4c6.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '214', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': 'abfcc78cc4c6.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-26 16:25:20 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-26 16:25:20 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-26 16:25:20 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-26 16:25:20 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (1.81ms)
2025-11-26 16:25:20 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-26 16:25:20 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'abfcc78cc4c6.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': 'abfcc78cc4c6.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-26 16:25:20 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-26 16:25:20 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-26 16:25:20 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (0.90ms)
2025-11-26 16:25:20 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-26 16:25:20 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'abfcc78cc4c6.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '214', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': 'abfcc78cc4c6.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-26 16:25:20 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-26 16:25:20 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-26 16:25:20 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-26 16:25:20 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.60ms)
2025-11-26 16:25:20 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-26 16:25:20 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'abfcc78cc4c6.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': 'abfcc78cc4c6.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-26 16:25:20 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-26 16:25:20 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-26 16:25:20 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.50ms)
2025-11-26 16:25:21 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-26 16:25:21 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'abfcc78cc4c6.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '51', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': 'abfcc78cc4c6.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-26 16:25:21 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: tools/list, ID: 1
2025-11-26 16:25:21 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.04ms)
2025-11-26 16:29:02 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-26 16:29:02 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'abfcc78cc4c6.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '214', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': 'abfcc78cc4c6.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-26 16:29:02 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-26 16:29:02 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-26 16:29:02 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-26 16:29:02 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (3.58ms)
2025-11-26 16:29:02 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-26 16:29:02 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'abfcc78cc4c6.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': 'abfcc78cc4c6.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-26 16:29:02 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-26 16:29:02 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-26 16:29:02 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.37ms)
2025-11-26 16:29:02 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-26 16:29:02 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'abfcc78cc4c6.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '214', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': 'abfcc78cc4c6.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-26 16:29:02 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-26 16:29:02 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-26 16:29:02 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-26 16:29:02 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.61ms)
2025-11-26 16:29:02 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-26 16:29:02 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'abfcc78cc4c6.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': 'abfcc78cc4c6.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-26 16:29:02 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-26 16:29:02 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-26 16:29:02 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.32ms)
2025-11-26 16:29:03 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-26 16:29:03 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'abfcc78cc4c6.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '51', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': 'abfcc78cc4c6.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-26 16:29:03 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: tools/list, ID: 1
2025-11-26 16:29:03 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.30ms)
2025-11-26 16:37:10 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-26 16:37:10 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'abfcc78cc4c6.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '214', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': 'abfcc78cc4c6.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-26 16:37:10 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-26 16:37:10 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-26 16:37:10 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-26 16:37:10 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (3.63ms)
2025-11-26 16:37:10 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-26 16:37:10 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'abfcc78cc4c6.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': 'abfcc78cc4c6.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-26 16:37:10 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-26 16:37:10 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-26 16:37:10 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.17ms)
2025-11-26 16:37:11 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-26 16:37:11 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'abfcc78cc4c6.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '214', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': 'abfcc78cc4c6.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-26 16:37:11 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-26 16:37:11 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-26 16:37:11 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-26 16:37:11 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.67ms)
2025-11-26 16:37:11 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-26 16:37:11 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'abfcc78cc4c6.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': 'abfcc78cc4c6.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-26 16:37:11 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-26 16:37:11 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-26 16:37:11 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.63ms)
2025-11-26 16:37:11 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-26 16:37:11 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'abfcc78cc4c6.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '51', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': 'abfcc78cc4c6.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-26 16:37:11 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: tools/list, ID: 1
2025-11-26 16:37:11 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (2.22ms)
2025-11-26 16:50:24 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-26 16:50:24 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'abfcc78cc4c6.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '214', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': 'abfcc78cc4c6.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-26 16:50:24 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: initialize, ID: 0
2025-11-26 16:50:24 | INFO     | mcp_server_multi_kb.py:347 | ‚úÖ Initialize: Registered 8 tools (including üåê chat_global)
2025-11-26 16:50:24 | DEBUG    | mcp_server_multi_kb.py:348 | Tools: ['create_collection', 'list_collections', 'get_collection_info', 'upload_document_to_kb', 'chat_with_kb', 'chat_global', 'clear_chat_history', 'delete_collection']
2025-11-26 16:50:24 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 200 (3.98ms)
2025-11-26 16:50:24 | INFO     | mcp_server_multi_kb.py:76 | üì• POST /mcp
2025-11-26 16:50:24 | DEBUG    | mcp_server_multi_kb.py:77 | Headers: {'host': 'abfcc78cc4c6.ngrok-free.app', 'user-agent': 'python-httpx/0.27.2', 'content-length': '57', 'accept': 'application/json, text/event-stream', 'accept-encoding': 'gzip, deflate, br, zstd', 'content-type': 'application/json', 'x-forwarded-for': '203.185.130.133', 'x-forwarded-host': 'abfcc78cc4c6.ngrok-free.app', 'x-forwarded-proto': 'https'}
2025-11-26 16:50:24 | DEBUG    | mcp_server_multi_kb.py:273 | MCP Method: notifications/initialized, ID: None
2025-11-26 16:50:24 | DEBUG    | mcp_server_multi_kb.py:284 | Notification acknowledged: notifications/initialized
2025-11-26 16:50:24 | INFO     | mcp_server_multi_kb.py:87 | üì§ POST /mcp ‚Üí 202 (2.15ms)
2025-11-27 10:29:36 | INFO     | logger.py:76 | ‚úÖ Logger initialized: mcp_server
2025-11-27 10:29:36 | DEBUG    | logger.py:77 | Log file: /Users/pond500/RAG/mcp_rag-main/logs/server.log
2025-11-27 10:29:36 | INFO     | multi_kb_rag.py:48 | üöÄ Initializing Multi-Knowledge Base RAG System...
2025-11-27 10:29:36 | DEBUG    | multi_kb_rag.py:55 | Qdrant client: localhost:6333
2025-11-27 10:29:45 | INFO     | multi_kb_rag.py:74 | üîç Initializing Sparse BM25 model...
2025-11-27 10:29:47 | INFO     | multi_kb_rag.py:76 | ‚úÖ Sparse BM25 model loaded
2025-11-27 10:29:47 | ERROR    | multi_kb_rag.py:112 | ‚ö†Ô∏è Failed to create router index: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/httpx/_transports/default.py", line 250, in handle_request
    resp = self._pool.handle_request(req)
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/httpcore/_sync/connection_pool.py", line 256, in handle_request
    raise exc from None
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/httpcore/_sync/connection_pool.py", line 236, in handle_request
    response = connection.handle_request(
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/httpcore/_sync/connection.py", line 101, in handle_request
    raise exc
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/httpcore/_sync/connection.py", line 78, in handle_request
    stream = self._connect(request)
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/httpcore/_sync/connection.py", line 124, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/httpcore/_backends/sync.py", line 207, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/homebrew/Cellar/python@3.10/3.10.19_1/Frameworks/Python.framework/Versions/3.10/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/http/api_client.py", line 106, in send_inner
    response = self._client.send(request)
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/httpx/_client.py", line 914, in send
    response = self._send_handling_auth(
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/httpx/_client.py", line 942, in _send_handling_auth
    response = self._send_handling_redirects(
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/httpx/_client.py", line 979, in _send_handling_redirects
    response = self._send_single_request(request)
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/httpx/_client.py", line 1014, in _send_single_request
    response = transport.handle_request(request)
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/httpx/_transports/default.py", line 249, in handle_request
    with map_httpcore_exceptions():
  File "/opt/homebrew/Cellar/python@3.10/3.10.19_1/Frameworks/Python.framework/Versions/3.10/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/pond500/RAG/mcp_rag-main/app/multi_kb_rag.py", line 106, in _ensure_router_index
    self.qdrant_client.create_collection(
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/qdrant_client.py", line 2081, in create_collection
    return self._client.create_collection(
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/qdrant_remote.py", line 2637, in create_collection
    result: Optional[bool] = self.http.collections_api.create_collection(
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/http/api/collections_api.py", line 1170, in create_collection
    return self._build_for_create_collection(
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/http/api/collections_api.py", line 116, in _build_for_create_collection
    return self.api_client.request(
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/http/api_client.py", line 79, in request
    return self.send(request, type_)
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/http/api_client.py", line 96, in send
    response = self.middleware(request, self.send_inner)
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/http/api_client.py", line 205, in __call__
    return call_next(request)
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/http/api_client.py", line 108, in send_inner
    raise ResponseHandlingException(e)
qdrant_client.http.exceptions.ResponseHandlingException: [Errno 61] Connection refused
2025-11-27 10:29:47 | INFO     | multi_kb_rag.py:90 | ‚úÖ Multi-KB RAG System initialized with Hybrid Search (Dense + Sparse BM25)
2025-11-27 10:29:49 | ERROR    | multi_kb_rag.py:232 | Failed to create collection: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/httpx/_transports/default.py", line 250, in handle_request
    resp = self._pool.handle_request(req)
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/httpcore/_sync/connection_pool.py", line 256, in handle_request
    raise exc from None
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/httpcore/_sync/connection_pool.py", line 236, in handle_request
    response = connection.handle_request(
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/httpcore/_sync/connection.py", line 101, in handle_request
    raise exc
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/httpcore/_sync/connection.py", line 78, in handle_request
    stream = self._connect(request)
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/httpcore/_sync/connection.py", line 124, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/httpcore/_backends/sync.py", line 207, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/homebrew/Cellar/python@3.10/3.10.19_1/Frameworks/Python.framework/Versions/3.10/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/http/api_client.py", line 106, in send_inner
    response = self._client.send(request)
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/httpx/_client.py", line 914, in send
    response = self._send_handling_auth(
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/httpx/_client.py", line 942, in _send_handling_auth
    response = self._send_handling_redirects(
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/httpx/_client.py", line 979, in _send_handling_redirects
    response = self._send_single_request(request)
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/httpx/_client.py", line 1014, in _send_single_request
    response = transport.handle_request(request)
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/httpx/_transports/default.py", line 249, in handle_request
    with map_httpcore_exceptions():
  File "/opt/homebrew/Cellar/python@3.10/3.10.19_1/Frameworks/Python.framework/Versions/3.10/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/pond500/RAG/mcp_rag-main/app/multi_kb_rag.py", line 187, in create_collection
    self.qdrant_client.create_collection(
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/qdrant_client.py", line 2081, in create_collection
    return self._client.create_collection(
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/qdrant_remote.py", line 2637, in create_collection
    result: Optional[bool] = self.http.collections_api.create_collection(
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/http/api/collections_api.py", line 1170, in create_collection
    return self._build_for_create_collection(
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/http/api/collections_api.py", line 116, in _build_for_create_collection
    return self.api_client.request(
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/http/api_client.py", line 79, in request
    return self.send(request, type_)
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/http/api_client.py", line 96, in send
    response = self.middleware(request, self.send_inner)
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/http/api_client.py", line 205, in __call__
    return call_next(request)
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/http/api_client.py", line 108, in send_inner
    raise ResponseHandlingException(e)
qdrant_client.http.exceptions.ResponseHandlingException: [Errno 61] Connection refused
2025-11-27 10:30:25 | INFO     | logger.py:76 | ‚úÖ Logger initialized: mcp_server
2025-11-27 10:30:25 | DEBUG    | logger.py:77 | Log file: /Users/pond500/RAG/mcp_rag-main/logs/server.log
2025-11-27 10:30:25 | INFO     | multi_kb_rag.py:48 | üöÄ Initializing Multi-Knowledge Base RAG System...
2025-11-27 10:30:25 | DEBUG    | multi_kb_rag.py:55 | Qdrant client: localhost:6333
2025-11-27 10:30:35 | INFO     | multi_kb_rag.py:74 | üîç Initializing Sparse BM25 model...
2025-11-27 10:30:35 | INFO     | multi_kb_rag.py:76 | ‚úÖ Sparse BM25 model loaded
2025-11-27 10:30:35 | INFO     | multi_kb_rag.py:90 | ‚úÖ Multi-KB RAG System initialized with Hybrid Search (Dense + Sparse BM25)
2025-11-27 10:30:35 | INFO     | multi_kb_rag.py:198 | ‚úÖ Created Hybrid Search collection: kb_test_hybrid_kb (Dense + BM25)
2025-11-27 10:30:36 | DEBUG    | multi_kb_rag.py:128 | Updating router index for test_hybrid_kb...
2025-11-27 10:30:36 | ERROR    | multi_kb_rag.py:155 | Failed to update router index for test_hybrid_kb: Unexpected Response: 400 (Bad Request)
Raw response content:
b'{"status":{"error":"Format error in JSON body: value kb_test_hybrid_kb is not a valid point ID, valid values are either an unsigned integer or a UUID"},"time":0.0}'
Traceback (most recent call last):
  File "/Users/pond500/RAG/mcp_rag-main/app/multi_kb_rag.py", line 146, in _update_router_index
    self.qdrant_client.upsert(
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/qdrant_client.py", line 1349, in upsert
    return self._client.upsert(
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/qdrant_remote.py", line 1756, in upsert
    http_result = self.openapi_client.points_api.upsert_points(
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/http/api/points_api.py", line 1667, in upsert_points
    return self._build_for_upsert_points(
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/http/api/points_api.py", line 852, in _build_for_upsert_points
    return self.api_client.request(
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/http/api_client.py", line 79, in request
    return self.send(request, type_)
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/http/api_client.py", line 102, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.UnexpectedResponse: Unexpected Response: 400 (Bad Request)
Raw response content:
b'{"status":{"error":"Format error in JSON body: value kb_test_hybrid_kb is not a valid point ID, valid values are either an unsigned integer or a UUID"},"time":0.0}'
2025-11-27 10:30:36 | INFO     | multi_kb_rag.py:223 | ‚úÖ Created collection: kb_test_hybrid_kb
2025-11-27 10:30:36 | INFO     | multi_kb_rag.py:507 | üìÑ Extracting text from gun_license_guide.txt...
2025-11-27 10:30:36 | INFO     | multi_kb_rag.py:403 | ü§ñ AI Extracting metadata from document...
2025-11-27 10:30:37 | DEBUG    | multi_kb_rag.py:434 | AI Metadata extracted: {'doc_type': 'Manual', 'category': 'Legal', 'status': 'Published', 'title': 'Gun License Application Guide ‚Äì Requirements and Process in Thailand'}
2025-11-27 10:30:37 | INFO     | multi_kb_rag.py:530 | üìù Generated description: [Manual] Gun License Application Guide ‚Äì Requirements and Process in Thailand - Category: Legal (Published)
2025-11-27 10:30:37 | INFO     | multi_kb_rag.py:556 | üìù Creating documents from 1 pages...
2025-11-27 10:30:37 | INFO     | multi_kb_rag.py:577 | ‚úÇÔ∏è Splitting documents into chunks...
2025-11-27 10:30:37 | DEBUG    | multi_kb_rag.py:579 | Created 1 chunks
2025-11-27 10:30:37 | INFO     | multi_kb_rag.py:585 | üîÑ Generating Dense + Sparse (BM25) vectors for Hybrid Search...
2025-11-27 10:30:37 | INFO     | multi_kb_rag.py:622 | üíæ Upserting 1 points with Hybrid vectors to Qdrant...
2025-11-27 10:30:37 | INFO     | multi_kb_rag.py:627 | ‚úÖ Uploaded 1 chunks with Dense + BM25 vectors
2025-11-27 10:30:37 | DEBUG    | multi_kb_rag.py:128 | Updating router index for test_hybrid_kb...
2025-11-27 10:30:37 | ERROR    | multi_kb_rag.py:155 | Failed to update router index for test_hybrid_kb: Unexpected Response: 400 (Bad Request)
Raw response content:
b'{"status":{"error":"Format error in JSON body: value kb_test_hybrid_kb is not a valid point ID, valid values are either an unsigned integer or a UUID"},"time":0.0}'
Traceback (most recent call last):
  File "/Users/pond500/RAG/mcp_rag-main/app/multi_kb_rag.py", line 146, in _update_router_index
    self.qdrant_client.upsert(
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/qdrant_client.py", line 1349, in upsert
    return self._client.upsert(
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/qdrant_remote.py", line 1756, in upsert
    http_result = self.openapi_client.points_api.upsert_points(
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/http/api/points_api.py", line 1667, in upsert_points
    return self._build_for_upsert_points(
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/http/api/points_api.py", line 852, in _build_for_upsert_points
    return self.api_client.request(
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/http/api_client.py", line 79, in request
    return self.send(request, type_)
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/http/api_client.py", line 102, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.UnexpectedResponse: Unexpected Response: 400 (Bad Request)
Raw response content:
b'{"status":{"error":"Format error in JSON body: value kb_test_hybrid_kb is not a valid point ID, valid values are either an unsigned integer or a UUID"},"time":0.0}'
2025-11-27 10:30:37 | INFO     | multi_kb_rag.py:634 | ‚úÖ Successfully uploaded gun_license_guide.txt to test_hybrid_kb
2025-11-27 10:30:37 | DEBUG    | multi_kb_rag.py:635 | KB Name: test_hybrid_kb
2025-11-27 10:30:37 | DEBUG    | multi_kb_rag.py:636 | Collection: kb_test_hybrid_kb
2025-11-27 10:30:37 | DEBUG    | multi_kb_rag.py:637 | Description: [Manual] Gun License Application Guide ‚Äì Requirements and Process in Thailand - Category: Legal (Published)
2025-11-27 10:30:37 | DEBUG    | multi_kb_rag.py:638 | AI Metadata: {'doc_type': 'Manual', 'category': 'Legal', 'status': 'Published', 'title': 'Gun License Application Guide ‚Äì Requirements and Process in Thailand'}
2025-11-27 10:30:37 | INFO     | multi_kb_rag.py:710 | üîç Performing Hybrid Search for query: 'How do I apply for a gun license?...'
2025-11-27 10:30:37 | ERROR    | multi_kb_rag.py:849 | Chat failed: Unsupported query type: <class 'dict'>
Traceback (most recent call last):
  File "/Users/pond500/RAG/mcp_rag-main/app/multi_kb_rag.py", line 724, in chat_with_collection
    search_results = self.qdrant_client.query_points(
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/qdrant_client.py", line 543, in query_points
    query, prefetch = self._resolve_query_to_embedding_embeddings_and_prefetch(query, prefetch)
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/qdrant_fastembed.py", line 578, in _resolve_query_to_embedding_embeddings_and_prefetch
    query = self._resolve_query_to_embedding_embeddings(query=query)
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/qdrant_fastembed.py", line 646, in _resolve_query_to_embedding_embeddings
    raise ValueError(f"Unsupported query type: {type(query)}")
ValueError: Unsupported query type: <class 'dict'>
2025-11-27 10:30:37 | INFO     | multi_kb_rag.py:350 | ‚úÖ Deleted collection: kb_test_hybrid_kb
2025-11-27 10:31:11 | INFO     | logger.py:76 | ‚úÖ Logger initialized: mcp_server
2025-11-27 10:31:11 | DEBUG    | logger.py:77 | Log file: /Users/pond500/RAG/mcp_rag-main/logs/server.log
2025-11-27 10:31:11 | INFO     | multi_kb_rag.py:48 | üöÄ Initializing Multi-Knowledge Base RAG System...
2025-11-27 10:31:11 | DEBUG    | multi_kb_rag.py:55 | Qdrant client: localhost:6333
2025-11-27 10:31:17 | INFO     | multi_kb_rag.py:74 | üîç Initializing Sparse BM25 model...
2025-11-27 10:31:17 | INFO     | multi_kb_rag.py:76 | ‚úÖ Sparse BM25 model loaded
2025-11-27 10:31:17 | INFO     | multi_kb_rag.py:90 | ‚úÖ Multi-KB RAG System initialized with Hybrid Search (Dense + Sparse BM25)
2025-11-27 10:31:18 | INFO     | multi_kb_rag.py:198 | ‚úÖ Created Hybrid Search collection: kb_test_hybrid_kb (Dense + BM25)
2025-11-27 10:31:18 | DEBUG    | multi_kb_rag.py:128 | Updating router index for test_hybrid_kb...
2025-11-27 10:31:18 | ERROR    | multi_kb_rag.py:155 | Failed to update router index for test_hybrid_kb: Unexpected Response: 400 (Bad Request)
Raw response content:
b'{"status":{"error":"Format error in JSON body: value kb_test_hybrid_kb is not a valid point ID, valid values are either an unsigned integer or a UUID"},"time":0.0}'
Traceback (most recent call last):
  File "/Users/pond500/RAG/mcp_rag-main/app/multi_kb_rag.py", line 146, in _update_router_index
    self.qdrant_client.upsert(
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/qdrant_client.py", line 1349, in upsert
    return self._client.upsert(
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/qdrant_remote.py", line 1756, in upsert
    http_result = self.openapi_client.points_api.upsert_points(
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/http/api/points_api.py", line 1667, in upsert_points
    return self._build_for_upsert_points(
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/http/api/points_api.py", line 852, in _build_for_upsert_points
    return self.api_client.request(
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/http/api_client.py", line 79, in request
    return self.send(request, type_)
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/http/api_client.py", line 102, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.UnexpectedResponse: Unexpected Response: 400 (Bad Request)
Raw response content:
b'{"status":{"error":"Format error in JSON body: value kb_test_hybrid_kb is not a valid point ID, valid values are either an unsigned integer or a UUID"},"time":0.0}'
2025-11-27 10:31:18 | INFO     | multi_kb_rag.py:223 | ‚úÖ Created collection: kb_test_hybrid_kb
2025-11-27 10:31:18 | INFO     | multi_kb_rag.py:507 | üìÑ Extracting text from gun_license_guide.txt...
2025-11-27 10:31:18 | INFO     | multi_kb_rag.py:403 | ü§ñ AI Extracting metadata from document...
2025-11-27 10:31:19 | DEBUG    | multi_kb_rag.py:434 | AI Metadata extracted: {'doc_type': 'Manual', 'category': 'Legal', 'status': 'Published', 'title': 'Gun License Application Guide'}
2025-11-27 10:31:19 | INFO     | multi_kb_rag.py:530 | üìù Generated description: [Manual] Gun License Application Guide - Category: Legal (Published)
2025-11-27 10:31:19 | INFO     | multi_kb_rag.py:556 | üìù Creating documents from 1 pages...
2025-11-27 10:31:19 | INFO     | multi_kb_rag.py:577 | ‚úÇÔ∏è Splitting documents into chunks...
2025-11-27 10:31:19 | DEBUG    | multi_kb_rag.py:579 | Created 1 chunks
2025-11-27 10:31:19 | INFO     | multi_kb_rag.py:585 | üîÑ Generating Dense + Sparse (BM25) vectors for Hybrid Search...
2025-11-27 10:31:19 | INFO     | multi_kb_rag.py:622 | üíæ Upserting 1 points with Hybrid vectors to Qdrant...
2025-11-27 10:31:19 | INFO     | multi_kb_rag.py:627 | ‚úÖ Uploaded 1 chunks with Dense + BM25 vectors
2025-11-27 10:31:19 | DEBUG    | multi_kb_rag.py:128 | Updating router index for test_hybrid_kb...
2025-11-27 10:31:19 | ERROR    | multi_kb_rag.py:155 | Failed to update router index for test_hybrid_kb: Unexpected Response: 400 (Bad Request)
Raw response content:
b'{"status":{"error":"Format error in JSON body: value kb_test_hybrid_kb is not a valid point ID, valid values are either an unsigned integer or a UUID"},"time":0.0}'
Traceback (most recent call last):
  File "/Users/pond500/RAG/mcp_rag-main/app/multi_kb_rag.py", line 146, in _update_router_index
    self.qdrant_client.upsert(
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/qdrant_client.py", line 1349, in upsert
    return self._client.upsert(
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/qdrant_remote.py", line 1756, in upsert
    http_result = self.openapi_client.points_api.upsert_points(
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/http/api/points_api.py", line 1667, in upsert_points
    return self._build_for_upsert_points(
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/http/api/points_api.py", line 852, in _build_for_upsert_points
    return self.api_client.request(
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/http/api_client.py", line 79, in request
    return self.send(request, type_)
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/http/api_client.py", line 102, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.UnexpectedResponse: Unexpected Response: 400 (Bad Request)
Raw response content:
b'{"status":{"error":"Format error in JSON body: value kb_test_hybrid_kb is not a valid point ID, valid values are either an unsigned integer or a UUID"},"time":0.0}'
2025-11-27 10:31:19 | INFO     | multi_kb_rag.py:634 | ‚úÖ Successfully uploaded gun_license_guide.txt to test_hybrid_kb
2025-11-27 10:31:19 | DEBUG    | multi_kb_rag.py:635 | KB Name: test_hybrid_kb
2025-11-27 10:31:19 | DEBUG    | multi_kb_rag.py:636 | Collection: kb_test_hybrid_kb
2025-11-27 10:31:19 | DEBUG    | multi_kb_rag.py:637 | Description: [Manual] Gun License Application Guide - Category: Legal (Published)
2025-11-27 10:31:19 | DEBUG    | multi_kb_rag.py:638 | AI Metadata: {'doc_type': 'Manual', 'category': 'Legal', 'status': 'Published', 'title': 'Gun License Application Guide'}
2025-11-27 10:31:19 | INFO     | multi_kb_rag.py:710 | üîç Performing Hybrid Search for query: 'How do I apply for a gun license?...'
2025-11-27 10:31:19 | ERROR    | multi_kb_rag.py:849 | Chat failed: Unsupported query type: <class 'dict'>
Traceback (most recent call last):
  File "/Users/pond500/RAG/mcp_rag-main/app/multi_kb_rag.py", line 724, in chat_with_collection
    search_results = self.qdrant_client.query_points(
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/qdrant_client.py", line 543, in query_points
    query, prefetch = self._resolve_query_to_embedding_embeddings_and_prefetch(query, prefetch)
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/qdrant_fastembed.py", line 578, in _resolve_query_to_embedding_embeddings_and_prefetch
    query = self._resolve_query_to_embedding_embeddings(query=query)
  File "/Users/pond500/RAG/mcp_rag-main/venv_clean/lib/python3.10/site-packages/qdrant_client/qdrant_fastembed.py", line 646, in _resolve_query_to_embedding_embeddings
    raise ValueError(f"Unsupported query type: {type(query)}")
ValueError: Unsupported query type: <class 'dict'>
2025-11-27 10:31:19 | INFO     | multi_kb_rag.py:350 | ‚úÖ Deleted collection: kb_test_hybrid_kb
2025-11-27 10:32:02 | INFO     | logger.py:76 | ‚úÖ Logger initialized: mcp_server
2025-11-27 10:32:02 | DEBUG    | logger.py:77 | Log file: /Users/pond500/RAG/mcp_rag-main/logs/server.log
2025-11-27 10:32:02 | INFO     | multi_kb_rag.py:48 | üöÄ Initializing Multi-Knowledge Base RAG System...
2025-11-27 10:32:02 | DEBUG    | multi_kb_rag.py:55 | Qdrant client: localhost:6333
2025-11-27 10:32:09 | INFO     | multi_kb_rag.py:74 | üîç Initializing Sparse BM25 model...
2025-11-27 10:32:09 | INFO     | multi_kb_rag.py:76 | ‚úÖ Sparse BM25 model loaded
2025-11-27 10:32:09 | INFO     | multi_kb_rag.py:90 | ‚úÖ Multi-KB RAG System initialized with Hybrid Search (Dense + Sparse BM25)
2025-11-27 10:32:10 | INFO     | multi_kb_rag.py:200 | ‚úÖ Created Hybrid Search collection: kb_test_hybrid_kb (Dense + BM25)
2025-11-27 10:32:10 | DEBUG    | multi_kb_rag.py:128 | Updating router index for test_hybrid_kb...
2025-11-27 10:32:10 | INFO     | multi_kb_rag.py:153 | ‚úÖ Updated router index for: test_hybrid_kb
2025-11-27 10:32:10 | DEBUG    | multi_kb_rag.py:154 | Description: Test Hybrid Search collection with Dense + BM25 vectors...
2025-11-27 10:32:10 | INFO     | multi_kb_rag.py:225 | ‚úÖ Created collection: kb_test_hybrid_kb
2025-11-27 10:32:10 | INFO     | multi_kb_rag.py:509 | üìÑ Extracting text from gun_license_guide.txt...
2025-11-27 10:32:10 | INFO     | multi_kb_rag.py:405 | ü§ñ AI Extracting metadata from document...
2025-11-27 10:32:11 | DEBUG    | multi_kb_rag.py:436 | AI Metadata extracted: {'doc_type': 'Manual', 'category': 'Legal', 'status': 'Published', 'title': 'Gun License Application Guide ‚Äì Requirements and Process in Thailand'}
2025-11-27 10:32:11 | INFO     | multi_kb_rag.py:532 | üìù Generated description: [Manual] Gun License Application Guide ‚Äì Requirements and Process in Thailand - Category: Legal (Published)
2025-11-27 10:32:11 | INFO     | multi_kb_rag.py:558 | üìù Creating documents from 1 pages...
2025-11-27 10:32:11 | INFO     | multi_kb_rag.py:579 | ‚úÇÔ∏è Splitting documents into chunks...
2025-11-27 10:32:11 | DEBUG    | multi_kb_rag.py:581 | Created 1 chunks
2025-11-27 10:32:11 | INFO     | multi_kb_rag.py:587 | üîÑ Generating Dense + Sparse (BM25) vectors for Hybrid Search...
2025-11-27 10:32:11 | INFO     | multi_kb_rag.py:624 | üíæ Upserting 1 points with Hybrid vectors to Qdrant...
2025-11-27 10:32:11 | INFO     | multi_kb_rag.py:629 | ‚úÖ Uploaded 1 chunks with Dense + BM25 vectors
2025-11-27 10:32:11 | DEBUG    | multi_kb_rag.py:128 | Updating router index for test_hybrid_kb...
2025-11-27 10:32:11 | INFO     | multi_kb_rag.py:153 | ‚úÖ Updated router index for: test_hybrid_kb
2025-11-27 10:32:11 | DEBUG    | multi_kb_rag.py:154 | Description: [Manual] Gun License Application Guide ‚Äì Requirements and Process in Thailand - Category: Legal (Pub...
2025-11-27 10:32:11 | INFO     | multi_kb_rag.py:636 | ‚úÖ Successfully uploaded gun_license_guide.txt to test_hybrid_kb
2025-11-27 10:32:11 | DEBUG    | multi_kb_rag.py:637 | KB Name: test_hybrid_kb
2025-11-27 10:32:11 | DEBUG    | multi_kb_rag.py:638 | Collection: kb_test_hybrid_kb
2025-11-27 10:32:11 | DEBUG    | multi_kb_rag.py:639 | Description: [Manual] Gun License Application Guide ‚Äì Requirements and Process in Thailand - Category: Legal (Published)
2025-11-27 10:32:11 | DEBUG    | multi_kb_rag.py:640 | AI Metadata: {'doc_type': 'Manual', 'category': 'Legal', 'status': 'Published', 'title': 'Gun License Application Guide ‚Äì Requirements and Process in Thailand'}
2025-11-27 10:32:12 | INFO     | multi_kb_rag.py:712 | üîç Performing Hybrid Search for query: 'How do I apply for a gun license?...'
2025-11-27 10:32:12 | DEBUG    | multi_kb_rag.py:740 | Hybrid Search returned 1 candidates
2025-11-27 10:32:12 | INFO     | multi_kb_rag.py:753 | üéØ Reranking 1 candidates...
2025-11-27 10:32:18 | INFO     | multi_kb_rag.py:775 | ‚úÖ Reranking complete, selected top 1 documents
2025-11-27 10:32:18 | DEBUG    | multi_kb_rag.py:776 | Top rerank scores: ['0.9501']
2025-11-27 10:32:18 | INFO     | multi_kb_rag.py:820 | üí¨ Generating answer with LLM...
2025-11-27 10:32:20 | INFO     | multi_kb_rag.py:836 | ‚úÖ Answer generated successfully for session: test_session_hybrid
2025-11-27 10:32:20 | INFO     | multi_kb_rag.py:352 | ‚úÖ Deleted collection: kb_test_hybrid_kb
